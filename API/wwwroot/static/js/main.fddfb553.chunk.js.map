{"version":3,"sources":["app/models/pagination.ts","app/api/agent.ts","app/models/activity.ts","app/models/profile.ts","app/stores/activityStore.ts","app/stores/ProfileStore.ts","app/stores/UserStore.ts","app/stores/store.ts","app/stores/commonStore.ts","app/stores/modelStore.ts","app/stores/commentStore.ts","app/layout/NavBar.tsx","features/activities/dashboard/ActivityFilters.tsx","features/profiles/FollowButton.tsx","features/profiles/ProfileCard.tsx","features/activities/dashboard/ActivityListItemAttendee.tsx","features/activities/dashboard/ActivityListItem.tsx","features/activities/dashboard/ActivityList.tsx","features/activities/dashboard/ActivityListItemPlaceHolder.tsx","features/activities/dashboard/ActivityDashboard.tsx","app/common/form/MyTextInputs.tsx","features/users/LoginForm.tsx","features/errors/ValidationErrors.tsx","features/users/RegisterForm.tsx","features/home/HomePage.tsx","app/layout/LoadingComponent.tsx","app/common/form/MyTextArea.tsx","app/common/form/MySelectInput.tsx","app/common/form/MyDateInput.tsx","app/common/options/categoryOptions.ts","features/activities/form/ActivityForm.tsx","features/activities/details/ActivityDetailedChat.tsx","features/activities/details/ActivityDetailedInfo.tsx","features/activities/details/ActivityDetailedSidebar.tsx","features/activities/details/ActivityDetaledHeader.tsx","features/activities/details/ActivityDetails.tsx","features/errors/TestError.tsx","features/errors/NotFound.tsx","features/errors/ServerError.tsx","app/common/modals/ModalContainer.tsx","features/profiles/ProfileEditForm.tsx","features/profiles/ProfileAbout.tsx","app/common/imageUpload/PhotoWidgetCropper.tsx","app/common/imageUpload/PhotoWidgetDropzone.tsx","app/common/imageUpload/PhotoUploadWidget.tsx","features/profiles/ProfilePhotos.tsx","features/profiles/ProfileFollowings.tsx","features/profiles/ProfileActivities.tsx","features/profiles/ProfileContent.tsx","features/profiles/ProfileHeader.tsx","features/profiles/ProfilePage.tsx","app/layout/PrivateRoute.tsx","app/common/util/hooks,.ts","features/users/RegisterSuccess.tsx","features/users/ConfirmEmail.tsx","app/layout/App.tsx","reportWebVitals.ts","app/layout/ScrollToTop.tsx","index.tsx"],"names":["PaginationResult","data","pagination","this","PagingParams","pageNumber","pageSize","axios","defaults","baseURL","process","interceptors","request","use","config","token","store","commonStore","headers","Authorization","response","a","JSON","parse","error","status","method","errors","hasOwnProperty","history","push","modalStateErrors","key","flat","toast","startsWith","userStore","logout","setServerError","Promise","reject","responseBody","requests","url","get","then","body","post","put","delete","agent","Activities","list","params","details","id","create","activity","update","attend","Account","current","login","user","register","FbLogin","accessToken","refreshToken","verifyEmail","email","resendEmailConfirm","Profiles","username","uploadPhoto","file","formData","FormData","append","setMainPhoto","deletePhoto","updateProfile","profile","updateFollowing","listFollowings","predicate","listActivities","Activity","init","Object","assign","ActivityFormValues","undefined","title","category","description","date","city","venue","Profile","userName","displayName","image","ActivityStore","activityRegistry","Map","selectedActivity","editMode","loading","loadingInitial","pagingParams","set","setPagingParams","setPrediacte","value","resetPrediacte","forEach","loadActivities","axiosParams","result","setActivity","setPagination","setLoadingInitial","console","log","loadActivity","getActivity","runInAction","isGoing","attendees","some","isHost","hostUsername","host","find","x","Date","state","createActivity","attendee","newActivity","updateActivity","updatedActivity","deleteActivity","updateAttendance","filter","cancelActivityToggle","isCancelled","clearSelectedActivity","updateAttenddeFollowing","following","followersCount","makeAutoObservable","reaction","keys","clear","URLSearchParams","toString","toISOString","Array","from","values","sort","b","getTime","entries","activitiesByDate","reduce","activities","format","ProfileStore","loadingProfile","uploading","followings","loadingFollowings","activeTab","userActivities","loadingActivities","setActiveTab","loadProfile","photo","photos","isMain","setImage","p","setDisplayName","activityStore","followingCount","loadFollowings","loadUserActivities","UserStore","fbAccessToken","fbLoading","refreshTokenTimeout","creds","setToken","startRefreshTokenTimer","modalStore","closeModal","window","localStorage","removeItem","getUser","name","facebookLogin","apiLogin","catch","err","FB","authResponse","scope","getFacebookLoginStatus","getLoginStatus","stopRefreshTokenTimeout","setTimeout","clearTimeout","getItem","uploaded","setUploaded","setItem","modal","open","openModal","content","profileStore","commentStore","comments","hubConnection","createHubConnection","activityId","HubConnectionBuilder","withUrl","accessTokenFactory","withAutomaticReconnect","configureLogging","LogLevel","Information","build","start","on","comment","createdAt","stopHubConnection","stop","clearComments","addComment","invoke","StoreContext","createContext","useStore","useContext","observer","isLoggedIn","Menu","inverted","fixed","Container","Item","as","NavLink","exact","to","header","src","alt","style","marginRight","Button","positive","position","Image","avatar","spaced","Dropdown","pointing","text","Link","icon","onClick","vertical","size","width","marginTop","Header","attached","color","active","has","calendarType","onChange","Reveal","animated","Content","visible","fluid","hidden","basic","e","preventDefault","handleFollow","Card","Description","str","length","substring","truncate","bio","extra","Icon","borderColor","borderWidth","List","horizontal","map","Popup","hoverable","trigger","circular","bordered","ActivityListItem","Segment","Group","Label","textAlign","marginBottom","secondary","clearing","floated","groupedActivities","group","sub","ActivityListItemPlaceHolder","Placeholder","minHeight","Line","Paragraph","disabled","useState","loadingNext","setLoadingNext","useEffect","Grid","Column","pageStart","loadMore","currentPage","hasMore","totalItems","initialLoad","Loader","MyTextInput","props","useField","field","meta","Form","Field","touched","label","initialValues","password","onSubmit","setErrors","handleSubmit","isSubmitting","className","autoComplete","placeholder","type","render","ValidationErrors","Message","i","validationSchema","Yup","required","isValid","dirty","Divider","LoadingComponent","Dimmer","MyTextArea","MySelectInput","helpers","Select","clearable","options","event","setValue","onBlur","setTouched","MyDateInput","selected","categoryOptions","useHistory","useParams","nullable","subheader","uuid","handleFormSubmit","enableReinitialize","rows","placeholderText","showTimeSelect","timeCaption","dateFormat","border","Comment","Avatar","Author","Metadata","formatDistanceToNow","Text","whiteSpace","resetForm","onKeyPress","shiftKey","verticalAlign","relaxed","divided","ribbon","Extra","activityImageStyle","activityImageTextStyle","bottom","left","height","zIndex","top","padding","TestErrors","widths","baseUrl","primary","NotFound","Inline","Modal","onClose","setEditMode","isCurrentUser","Tab","Pane","PhotoWidgetCropper","imagePreview","setCropper","initialAspectRatio","aspectRatio","preview","guides","viewMode","autoCropArea","background","onInitialized","cropper","PhotoWidgetDropzone","setFiles","styles","borderRadius","paddingTop","onDrop","useCallback","acceptedFiles","URL","createObjectURL","useDropzone","getRootProps","getInputProps","isDragActive","PhotoUploadWidget","files","revokeObjectURL","overflow","getCroppedCanvas","toBlob","blob","addPhotoMode","setPhotoMode","target","setTarget","itemsPerRow","currentTarget","handleMainPhoto","handleDeletePhoto","panes","menuItem","pane","menu","onTabChange","activeIndex","handleTabChange","objectFit","Meta","menuPosition","Statistic","PrivateRoute","Component","component","rest","useQuery","useLocation","search","RegisterSuccess","success","ConfirmEmail","Status","setStatus","handleEmailRsend","getBody","location","finally","hideProgressBar","path","HomePage","ActivityDashboard","ActivityDetails","ActivityForm","ProfilePage","ServerError","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ScrollToTop","pathname","scrollTo","createBrowserHistory","ReactDOM","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.fddfb553.chunk.js","sourcesContent":["export interface Pagination {\r\n\tcurrentPage: number;\r\n\titemsPerPage: number;\r\n\ttotalItems: number;\r\n\ttotalPages: number;\r\n}\r\n\r\nexport class PaginationResult<T> {\r\n\tdata: T;\r\n\tpagination: Pagination;\r\n\r\n\tconstructor(data: T, pagination: Pagination) {\r\n\t\tthis.data = data;\r\n\t\tthis.pagination = pagination;\r\n\t}\r\n}\r\n\r\nexport class PagingParams {\r\n\tpageNumber = 1;\r\n\tpageSize;\r\n\tconstructor(pageNumber = 0, pageSize = 2) {\r\n\t\tthis.pageNumber = pageNumber;\r\n\t\tthis.pageSize = pageSize;\r\n\t}\r\n}\r\n","import axios, { AxiosError, AxiosResponse } from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { history } from \"../..\";\nimport { Activity, ActivityFormValues } from \"../models/activity\";\nimport { PaginationResult } from \"../models/pagination\";\nimport { Photo, Profile, UserActivity } from \"../models/profile\";\nimport { User, UserFormValues } from \"../models/user\";\nimport { store } from \"../stores/store\";\n\nconst sleep = (delay: number) => {\n\treturn new Promise((resolve) => {\n\t\tsetTimeout(resolve, delay);\n\t});\n};\n\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\n\naxios.interceptors.request.use((config) => {\n\tconst token = store.commonStore.token;\n\tif (token) config.headers.Authorization = `Bearer ${token}`;\n\treturn config;\n});\n\naxios.interceptors.response.use(\n\tasync (response) => {\n\t\tif (process.env.NODE_ENV === \"development\") await sleep(1000);\n\t\tconst pagination = response.headers[\"pagination\"];\n\t\tif (pagination) {\n\t\t\tresponse.data = new PaginationResult(\n\t\t\t\tresponse.data,\n\t\t\t\tJSON.parse(pagination),\n\t\t\t);\n\t\t\treturn response as AxiosResponse<PaginationResult<any>>;\n\t\t}\n\t\treturn response;\n\t},\n\t(error: AxiosError) => {\n\t\tconst { data, status, config, headers } = error.response!;\n\t\tswitch (status) {\n\t\t\tcase 400:\n\t\t\t\tif (config.method === \"get\" && data.errors.hasOwnProperty(\"id\")) {\n\t\t\t\t\thistory.push(\"/not-found\");\n\t\t\t\t}\n\t\t\t\tif (data.errors) {\n\t\t\t\t\tconst modalStateErrors = [];\n\t\t\t\t\tfor (const key in data.errors) {\n\t\t\t\t\t\tif (data.errors[key]) {\n\t\t\t\t\t\t\tmodalStateErrors.push(data.errors[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthrow modalStateErrors.flat();\n\t\t\t\t} else {\n\t\t\t\t\ttoast.error(data);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 401:\n\t\t\t\tif (\n\t\t\t\t\tstatus === 401 &&\n\t\t\t\t\theaders[\"www-authenticate\"]?.startsWith(\"Bearer error='invalid_token'\")\n\t\t\t\t) {\n\t\t\t\t\tstore.userStore.logout();\n\t\t\t\t\ttoast.error(\"Session expired - please login again\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 404:\n\t\t\t\thistory.push(\"/not-found\");\n\t\t\t\tbreak;\n\t\t\tcase 500:\n\t\t\t\tstore.commonStore.setServerError(data);\n\t\t\t\thistory.push(\"/server-error\");\n\t\t\t\tbreak;\n\t\t}\n\t\treturn Promise.reject(error);\n\t},\n);\n\nconst responseBody = <T>(response: AxiosResponse<T>) => response.data;\n\nconst requests = {\n\tget: <T>(url: string) => axios.get<T>(url).then(responseBody),\n\tpost: <T>(url: string, body: {}) =>\n\t\taxios.post<T>(url, body).then(responseBody),\n\tput: <T>(url: string, body: {}) => axios.put<T>(url, body).then(responseBody),\n\tdel: <T>(url: string) => axios.delete<T>(url).then(responseBody),\n};\n\nconst Activities = {\n\tlist: (params: URLSearchParams) =>\n\t\taxios\n\t\t\t.get<PaginationResult<Activity[]>>(\"/activities\", { params })\n\t\t\t.then(responseBody),\n\tdetails: (id: string) => requests.get<Activity>(`/activities/${id}`),\n\tcreate: (activity: ActivityFormValues) =>\n\t\trequests.post<void>(\"/activities\", activity),\n\tupdate: (activity: ActivityFormValues) =>\n\t\trequests.put<void>(`/activities/${activity.id}`, activity),\n\tdelete: (id: string) => requests.del<void>(`/activities/${id}`),\n\tattend: (id: string) => requests.post<void>(`/activities/${id}/attend`, {}),\n};\n\nconst Account = {\n\tcurrent: () => requests.get<User>(\"/account\"),\n\tlogin: (user: UserFormValues) => requests.post<User>(\"/account/login\", user),\n\tregister: (user: UserFormValues) =>\n\t\trequests.post<User>(\"/account/register\", user),\n\tFbLogin: (accessToken: string) =>\n\t\trequests.post<User>(`/account/fbLogin?accessToken=${accessToken}`, {}),\n\trefreshToken: () => requests.post<User>(\"/account/refreshToken\", {}),\n\tverifyEmail: (token: string, email: string) =>\n\t\trequests.post<void>(\n\t\t\t`/account/verifyEmail?token=${token}&email=${email}`,\n\t\t\t{},\n\t\t),\n\tresendEmailConfirm: (email: string) =>\n\t\trequests.get(`/account/resendEmailConfirmationLink?email=${email}`),\n};\n\nconst Profiles = {\n\tget: (username: string) => requests.get<Profile>(`/profiles/${username}`),\n\tuploadPhoto: (file: Blob) => {\n\t\tlet formData = new FormData();\n\t\tformData.append(\"File\", file);\n\t\treturn axios.post<Photo>(\"photo\", formData, {\n\t\t\theaders: { \"Content-type\": \"multipart/form-data\" },\n\t\t});\n\t},\n\tsetMainPhoto: (id: string) => requests.post(`/photo/${id}/setMain`, {}),\n\tdeletePhoto: (id: string) => requests.del(`/photo/${id}`),\n\tupdateProfile: (profile: Partial<Profile>) =>\n\t\trequests.put(`/profiles`, profile),\n\tupdateFollowing: (username: string) =>\n\t\trequests.post(`/follow/${username}`, {}),\n\tlistFollowings: (username: string, predicate: string) =>\n\t\trequests.get<Profile[]>(`/follow/${username}?predicate=${predicate}`),\n\tlistActivities: (username: string, predicate: string) =>\n\t\trequests.get<UserActivity[]>(\n\t\t\t`/profiles/${username}/activities?predicate=${predicate}`,\n\t\t),\n};\n\nconst agent = {\n\tActivities,\n\tAccount,\n\tProfiles,\n};\n\nexport default agent;\n","import { Profile } from \"./profile\";\n\nexport interface Activity {\n\tid: string;\n\ttitle: string;\n\tdate: Date | null;\n\tdescription: string;\n\tcategory: string;\n\tcity: string;\n\tvenue: string;\n\thostUsername: string;\n\tisCancelled: boolean;\n\tisGoing: boolean;\n\tisHost: boolean;\n\thost?: Profile;\n\tattendees: Profile[];\n}\n\nexport class Activity implements Activity {\n\tconstructor(init?: ActivityFormValues) {\n\t\tObject.assign(this, init);\n\t}\n}\n\nexport class ActivityFormValues {\n\tid?: string = undefined;\n\ttitle: string = \"\";\n\tcategory: string = \"\";\n\tdescription: string = \"\";\n\tdate: Date | null = null;\n\tcity: string = \"\";\n\tvenue: string = \"\";\n\n\tconstructor(activity?: ActivityFormValues) {\n\t\tif (activity) {\n\t\t\tthis.id = activity.id;\n\t\t\tthis.title = activity.title;\n\t\t\tthis.category = activity.category;\n\t\t\tthis.description = activity.description;\n\t\t\tthis.date = activity.date;\n\t\t\tthis.city = activity.city;\n\t\t\tthis.venue = activity.venue;\n\t\t}\n\t}\n}\n","import { User } from \"./user\";\r\n\r\nexport interface Profile {\r\n\tuserName: string;\r\n\tdisplayName: string;\r\n\timage?: string;\r\n\tbio?: string;\r\n\tfollowersCount: number;\r\n\tfollowingCount: number;\r\n\tfollowing: boolean;\r\n\tphotos: Photo[];\r\n}\r\n\r\nexport class Profile implements Profile {\r\n\tconstructor(user: User) {\r\n\t\tthis.userName = user.username;\r\n\t\tthis.displayName = user.displayName;\r\n\t\tthis.image = user.image;\r\n\t}\r\n}\r\nexport interface Photo {\r\n\tid: string;\r\n\turl: string;\r\n\tisMain: boolean;\r\n}\r\nexport interface UserActivity {\r\n\tid:string;\r\n\ttitle:string;\r\n\tcategory:string;\r\n\tdate:Date;\r\n}","import { makeAutoObservable, reaction, runInAction } from \"mobx\";\nimport agent from \"../api/agent\";\nimport { Activity, ActivityFormValues } from \"../models/activity\";\nimport { format } from \"date-fns\";\nimport { store } from \"./store\";\nimport { Profile } from \"../models/profile\";\nimport { Pagination, PagingParams } from \"../models/pagination\";\n\nexport default class ActivityStore {\n\tactivityRegistry = new Map<string, Activity>();\n\tselectedActivity: Activity | undefined = undefined;\n\teditMode = false;\n\tloading = false;\n\tloadingInitial = false;\n\tpagination: Pagination | null = null;\n\tpagingParams = new PagingParams();\n\tpredicate = new Map().set(\"all\", true);\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t\treaction(\n\t\t\t() => this.predicate.keys(),\n\t\t\t() => {\n\t\t\t\tthis.pagingParams = new PagingParams();\n\t\t\t\tthis.activityRegistry.clear();\n\t\t\t\tthis.loadActivities();\n\t\t\t},\n\t\t);\n\t}\n\n\tsetPagingParams = (pagingParams: PagingParams) => {\n\t\tthis.pagingParams = pagingParams;\n\t};\n\n\tsetPrediacte = (predicate: string, value: string | Date) => {\n\t\tconst resetPrediacte = () => {\n\t\t\tthis.predicate.forEach((value, key) => {\n\t\t\t\tif (key !== \"startDate\") this.predicate.delete(key);\n\t\t\t});\n\t\t};\n\t\tswitch (predicate) {\n\t\t\tcase \"all\":\n\t\t\t\tresetPrediacte();\n\t\t\t\tthis.predicate.set(\"all\", true);\n\t\t\t\tbreak;\n\t\t\tcase \"isGoing\":\n\t\t\t\tresetPrediacte();\n\t\t\t\tthis.predicate.set(\"isGoing\", true);\n\t\t\t\tbreak;\n\t\t\tcase \"isHost\":\n\t\t\t\tresetPrediacte();\n\t\t\t\tthis.predicate.set(\"isHost\", true);\n\t\t\t\tbreak;\n\t\t\tcase \"startDate\":\n\t\t\t\tthis.predicate.delete(\"startDate\");\n\t\t\t\tthis.predicate.set(\"startDate\", value);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tget axiosParams() {\n\t\tconst params = new URLSearchParams();\n\t\tparams.append(\"pageNumber\", this.pagingParams.pageNumber.toString());\n\t\tparams.append(\"pageSize\", this.pagingParams.pageSize.toString());\n\t\tthis.predicate.forEach((value, key) => {\n\t\t\tif (key === \"startDate\") {\n\t\t\t\tparams.append(key, (value as Date).toISOString());\n\t\t\t} else {\n\t\t\t\tparams.append(key, value);\n\t\t\t}\n\t\t});\n\t\treturn params;\n\t}\n\n\tget activitiesByDate() {\n\t\treturn Array.from(this.activityRegistry.values()).sort(\n\t\t\t(a, b) => a.date!.getTime() - b.date!.getTime(),\n\t\t);\n\t}\n\n\tget groupedActivities() {\n\t\treturn Object.entries(\n\t\t\tthis.activitiesByDate.reduce((activities, activity) => {\n\t\t\t\tconst date = format(activity.date!, \"dd MMM yyyy\");\n\t\t\t\tactivities[date] = activities[date]\n\t\t\t\t\t? [...activities[date], activity]\n\t\t\t\t\t: [activity];\n\t\t\t\treturn activities;\n\t\t\t}, {} as { [key: string]: Activity[] }),\n\t\t);\n\t}\n\n\tloadActivities = async () => {\n\t\tthis.loadingInitial = true;\n\t\ttry {\n\t\t\tconst result = await agent.Activities.list(this.axiosParams);\n\t\t\tresult.data.forEach((activity) => {\n\t\t\t\tthis.setActivity(activity);\n\t\t\t});\n\t\t\tthis.setPagination(result.pagination);\n\t\t\tthis.setLoadingInitial(false);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\tthis.setLoadingInitial(false);\n\t\t}\n\t};\n\tsetPagination = (pagination: Pagination) => {\n\t\tthis.pagination = pagination;\n\t};\n\n\tloadActivity = async (id: string) => {\n\t\tlet activity = this.getActivity(id);\n\t\tif (activity) {\n\t\t\tthis.selectedActivity = activity;\n\t\t\treturn activity;\n\t\t} else {\n\t\t\tthis.loadingInitial = true;\n\t\t\ttry {\n\t\t\t\tactivity = await agent.Activities.details(id);\n\t\t\t\tthis.setActivity(activity);\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tthis.selectedActivity = activity;\n\t\t\t\t});\n\t\t\t\tthis.setLoadingInitial(false);\n\t\t\t\treturn activity;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t\tthis.setLoadingInitial(false);\n\t\t\t}\n\t\t}\n\t};\n\n\tprivate setActivity = (activity: Activity) => {\n\t\tconst user = store.userStore.user;\n\t\tif (user) {\n\t\t\tactivity.isGoing = activity.attendees!.some(\n\t\t\t\t(a) => a.displayName === user.displayName,\n\t\t\t);\n\t\t\tactivity.isHost = activity.hostUsername === user.username;\n\t\t\tactivity.host = activity.attendees?.find(\n\t\t\t\t(x) => x.userName === activity.hostUsername,\n\t\t\t);\n\t\t}\n\t\tactivity.date = new Date(activity.date!);\n\t\tthis.activityRegistry.set(activity.id, activity);\n\t};\n\n\tprivate getActivity = (id: string) => {\n\t\treturn this.activityRegistry.get(id);\n\t};\n\n\tsetLoadingInitial = (state: boolean) => {\n\t\tthis.loadingInitial = state;\n\t};\n\n\tcreateActivity = async (activity: ActivityFormValues) => {\n\t\tconst user = store.userStore.user;\n\t\tconst attendee = new Profile(user!);\n\t\ttry {\n\t\t\tawait agent.Activities.create(activity);\n\t\t\tconst newActivity = new Activity(activity);\n\t\t\tnewActivity.hostUsername = user!.username;\n\t\t\tnewActivity.attendees = [attendee];\n\t\t\tthis.setActivity(newActivity);\n\t\t\trunInAction(() => {\n\t\t\t\tthis.selectedActivity = newActivity;\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tupdateActivity = async (activity: ActivityFormValues) => {\n\t\ttry {\n\t\t\tawait agent.Activities.update(activity);\n\t\t\trunInAction(() => {\n\t\t\t\tif (activity.id) {\n\t\t\t\t\tlet updatedActivity = {\n\t\t\t\t\t\t...this.getActivity(activity.id),\n\t\t\t\t\t\t...activity,\n\t\t\t\t\t};\n\t\t\t\t\tthis.activityRegistry.set(activity.id, updatedActivity as Activity);\n\t\t\t\t\tthis.selectedActivity = updatedActivity as Activity;\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tdeleteActivity = async (id: string) => {\n\t\tthis.loading = true;\n\t\ttry {\n\t\t\tawait agent.Activities.delete(id);\n\t\t\trunInAction(() => {\n\t\t\t\tthis.activityRegistry.delete(id);\n\t\t\t\tthis.loading = false;\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\trunInAction(() => {\n\t\t\t\tthis.loading = false;\n\t\t\t});\n\t\t}\n\t};\n\n\tupdateAttendance = async () => {\n\t\tconst user = store.userStore.user;\n\t\tthis.loading = true;\n\n\t\ttry {\n\t\t\tawait agent.Activities.attend(this.selectedActivity!.id);\n\t\t\trunInAction(() => {\n\t\t\t\tif (this.selectedActivity?.isGoing) {\n\t\t\t\t\tthis.selectedActivity.attendees =\n\t\t\t\t\t\tthis.selectedActivity.attendees?.filter(\n\t\t\t\t\t\t\t(a) => a.userName !== user?.username,\n\t\t\t\t\t\t);\n\t\t\t\t\tthis.selectedActivity.isGoing = false;\n\t\t\t\t} else {\n\t\t\t\t\tconst attendee = new Profile(user!);\n\t\t\t\t\tthis.selectedActivity?.attendees?.push(attendee);\n\t\t\t\t\tthis.selectedActivity!.isGoing = true;\n\t\t\t\t}\n\t\t\t\tthis.activityRegistry.set(\n\t\t\t\t\tthis.selectedActivity!.id,\n\t\t\t\t\tthis.selectedActivity!,\n\t\t\t\t);\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t} finally {\n\t\t\trunInAction(() => {\n\t\t\t\tthis.loading = false;\n\t\t\t});\n\t\t}\n\t};\n\n\tcancelActivityToggle = async () => {\n\t\tthis.loading = true;\n\t\ttry {\n\t\t\tawait agent.Activities.attend(this.selectedActivity!.id);\n\t\t\trunInAction(() => {\n\t\t\t\tthis.selectedActivity!.isCancelled =\n\t\t\t\t\t!this.selectedActivity?.isCancelled;\n\t\t\t\tthis.activityRegistry.set(\n\t\t\t\t\tthis.selectedActivity!.id,\n\t\t\t\t\tthis.selectedActivity!,\n\t\t\t\t);\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t} finally {\n\t\t\trunInAction(() => {\n\t\t\t\tthis.loading = false;\n\t\t\t});\n\t\t}\n\t};\n\tclearSelectedActivity = () => {\n\t\tthis.selectedActivity = undefined;\n\t};\n\n\tupdateAttenddeFollowing = (username: string) => {\n\t\tthis.activityRegistry.forEach((activity) => {\n\t\t\tactivity.attendees.forEach((attendee) => {\n\t\t\t\tif (attendee.userName === username)\n\t\t\t\t\tattendee.following\n\t\t\t\t\t\t? attendee.followersCount--\n\t\t\t\t\t\t: attendee.followersCount++;\n\t\t\t\tattendee.following = !attendee.following;\n\t\t\t});\n\t\t});\n\t};\n}\n","import { makeAutoObservable, reaction, runInAction } from \"mobx\";\r\nimport agent from \"../api/agent\";\r\nimport { Photo, Profile, UserActivity } from \"../models/profile\";\r\nimport { store } from \"./store\";\r\n\r\nexport default class ProfileStore {\r\n\tprofile: Profile | null = null;\r\n\tloadingProfile = false;\r\n\tuploading = false;\r\n\tloading = false;\r\n\tfollowings: Profile[] = [];\r\n\tloadingFollowings = false;\r\n\tactiveTab = 0;\r\n\tuserActivities: UserActivity[] = [];\r\n\tloadingActivities = false;\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\r\n\t\treaction(\r\n\t\t\t() => this.activeTab,\r\n\t\t\t(activeTab) => {\r\n\t\t\t\tif (activeTab === 3 || activeTab === 4) {\r\n\t\t\t\t\tconst predicate = activeTab === 3 ? \"followers\" : \"following\";\r\n\t\t\t\t\tthis.loadFollowings(predicate);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.followings = [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t);\r\n\t}\r\n\tsetActiveTab = (activeTab: any) => {\r\n\t\tthis.activeTab = activeTab;\r\n\t};\r\n\r\n\tget isCurrentUser() {\r\n\t\tif (store.userStore.user && this.profile) {\r\n\t\t\treturn store.userStore.user.username === this.profile.userName;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tloadProfile = async (username: string) => {\r\n\t\tthis.loadingProfile = true;\r\n\t\ttry {\r\n\t\t\tconst profile = await agent.Profiles.get(username);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.profile = profile;\r\n\t\t\t\tthis.loadingProfile = false;\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\trunInAction(() => (this.loadingProfile = false));\r\n\t\t}\r\n\t};\r\n\r\n\tuploadPhoto = async (file: Blob) => {\r\n\t\tthis.uploading = true;\r\n\t\ttry {\r\n\t\t\tconst response = await agent.Profiles.uploadPhoto(file);\r\n\t\t\tconst photo = response.data;\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tif (this.profile) {\r\n\t\t\t\t\tthis.profile.photos?.push(photo);\r\n\t\t\t\t\tif (photo.isMain && store.userStore.user) {\r\n\t\t\t\t\t\tstore.userStore.setImage(photo.url);\r\n\t\t\t\t\t\tthis.profile.image = photo.url;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.uploading = false;\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\trunInAction(() => (this.uploading = false));\r\n\t\t}\r\n\t};\r\n\tsetMainPhoto = async (photo: Photo) => {\r\n\t\tthis.loading = true;\r\n\t\ttry {\r\n\t\t\tawait agent.Profiles.setMainPhoto(photo.id);\r\n\t\t\tstore.userStore.setImage(photo.url);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tif (this.profile && this.profile.photos) {\r\n\t\t\t\t\tthis.profile.photos.find((p) => p.isMain)!.isMain = false;\r\n\t\t\t\t\tthis.profile.photos.find((p) => p.id === photo.id)!.isMain = true;\r\n\t\t\t\t\tthis.profile.image = photo.url;\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\trunInAction(() => (this.loading = false));\r\n\t\t}\r\n\t};\r\n\tdeletePhoto = async (photo: Photo) => {\r\n\t\tthis.loading = true;\r\n\t\ttry {\r\n\t\t\tawait agent.Profiles.deletePhoto(photo.id);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tif (this.profile) {\r\n\t\t\t\t\tthis.profile.photos = this.profile.photos.filter(\r\n\t\t\t\t\t\t(p) => p.id !== photo.id,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\trunInAction(() => (this.loading = false));\r\n\t\t}\r\n\t};\r\n\tupdateProfile = async (profile: Partial<Profile>) => {\r\n\t\tthis.loading = true;\r\n\t\ttry {\r\n\t\t\tawait agent.Profiles.updateProfile(profile);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tif (\r\n\t\t\t\t\tprofile.displayName &&\r\n\t\t\t\t\tprofile.displayName !== store.userStore.user?.displayName\r\n\t\t\t\t) {\r\n\t\t\t\t\tstore.userStore.setDisplayName(profile.displayName);\r\n\t\t\t\t}\r\n\t\t\t\tthis.profile = { ...this.profile, ...(profile as Profile) };\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\trunInAction(() => (this.loading = false));\r\n\t\t}\r\n\t};\r\n\tupdateFollowing = async (username: string, following: boolean) => {\r\n\t\tthis.loading = true;\r\n\t\ttry {\r\n\t\t\tawait agent.Profiles.updateFollowing(username);\r\n\t\t\tstore.activityStore.updateAttenddeFollowing(username);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.profile &&\r\n\t\t\t\t\tthis.profile.userName !== store.userStore.user?.username &&\r\n\t\t\t\t\tthis.profile.userName === username\r\n\t\t\t\t) {\r\n\t\t\t\t\tfollowing\r\n\t\t\t\t\t\t? this.profile.followersCount++\r\n\t\t\t\t\t\t: this.profile.followersCount--;\r\n\t\t\t\t\tthis.profile.following = !this.profile.following;\r\n\t\t\t\t}\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.profile &&\r\n\t\t\t\t\tthis.profile.userName === store.userStore.user?.username\r\n\t\t\t\t) {\r\n\t\t\t\t\tfollowing\r\n\t\t\t\t\t\t? this.profile.followingCount--\r\n\t\t\t\t\t\t: this.profile.followingCount++;\r\n\t\t\t\t}\r\n\t\t\t\tthis.followings.forEach((profile) => {\r\n\t\t\t\t\tif (profile.userName === username) {\r\n\t\t\t\t\t\tprofile.following\r\n\t\t\t\t\t\t\t? profile.followersCount--\r\n\t\t\t\t\t\t\t: profile.followersCount++;\r\n\t\t\t\t\t\tprofile.following = !profile.following;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\r\n\t\t\trunInAction(() => (this.loading = false));\r\n\t\t}\r\n\t};\r\n\tloadFollowings = async (predicate: string) => {\r\n\t\tthis.loadingFollowings = true;\r\n\t\ttry {\r\n\t\t\tconst following = await agent.Profiles.listFollowings(\r\n\t\t\t\tthis.profile!.userName,\r\n\t\t\t\tpredicate,\r\n\t\t\t);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.followings = following;\r\n\t\t\t\tthis.loadingFollowings = false;\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\trunInAction(() => (this.loadingFollowings = false));\r\n\t\t}\r\n\t};\r\n\tloadUserActivities = async (username: string, predicate?: string) => {\r\n\t\tthis.loadingActivities = true;\r\n\t\ttry {\r\n\t\t\tconst activities = await agent.Profiles.listActivities(\r\n\t\t\t\tusername,\r\n\t\t\t\tpredicate!,\r\n\t\t\t);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.userActivities = activities;\r\n\t\t\t\tthis.loadingActivities = false;\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\trunInAction(() => (this.loadingActivities = false));\r\n\t\t}\r\n\t};\r\n}\r\n","import { makeAutoObservable, runInAction } from \"mobx\";\r\nimport { history } from \"../..\";\r\nimport agent from \"../api/agent\";\r\nimport { User, UserFormValues } from \"../models/user\";\r\nimport { store } from \"./store\";\r\n\r\nexport default class UserStore {\r\n\tuser: User | null = null;\r\n\tfbAccessToken: string | null = null;\r\n\tfbLoading = false;\r\n\trefreshTokenTimeout: any;\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\tget isLoggedIn() {\r\n\t\treturn !!this.user;\r\n\t}\r\n\tlogin = async (creds: UserFormValues) => {\r\n\t\ttry {\r\n\t\t\tconst user = await agent.Account.login(creds);\r\n\t\t\tstore.commonStore.setToken(user.token);\r\n\t\t\tthis.startRefreshTokenTimer(user);\r\n\t\t\trunInAction(() => (this.user = user));\r\n\t\t\thistory.push(\"/activities\");\r\n\t\t\tstore.modalStore.closeModal();\r\n\t\t} catch (error) {\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t};\r\n\tlogout = () => {\r\n\t\tstore.commonStore.setToken(null);\r\n\t\twindow.localStorage.removeItem(\"jwt\");\r\n\t\tthis.user = null;\r\n\t\thistory.push(\"/\");\r\n\t};\r\n\r\n\tgetUser = async () => {\r\n\t\ttry {\r\n\t\t\tconst user = await agent.Account.current();\r\n\t\t\tstore.commonStore.setToken(user.token);\r\n\t\t\trunInAction(() => (this.user = user));\r\n\t\t\tthis.startRefreshTokenTimer(user);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t};\r\n\r\n\tregister = async (creds: UserFormValues) => {\r\n\t\ttry {\r\n\t\t\tawait agent.Account.register(creds);\r\n\t\t\thistory.push(`/account/registerSuccess?email=${creds.email}`);\r\n\t\t\tstore.modalStore.closeModal();\r\n\t\t} catch (error) {\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t};\r\n\tsetImage = (image: string) => {\r\n\t\tif (this.user) this.user.image = image;\r\n\t};\r\n\tsetDisplayName = (name: string) => {\r\n\t\tif (this.user) this.user.displayName = name;\r\n\t};\r\n\tfacebookLogin = () => {\r\n\t\tthis.fbLoading = true;\r\n\t\tconst apiLogin = (accessToken: string) => {\r\n\t\t\tagent.Account.FbLogin(accessToken)\r\n\t\t\t\t.then((user) => {\r\n\t\t\t\t\tstore.commonStore.setToken(user.token);\r\n\t\t\t\t\tthis.startRefreshTokenTimer(user);\r\n\t\t\t\t\trunInAction(() => {\r\n\t\t\t\t\t\tthis.user = user;\r\n\t\t\t\t\t\tthis.fbLoading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\thistory.push(\"/activities\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\trunInAction(() => (this.fbLoading = false));\r\n\t\t\t\t});\r\n\t\t};\r\n\t\tif (this.fbAccessToken) {\r\n\t\t\tapiLogin(this.fbAccessToken);\r\n\t\t} else {\r\n\t\t\twindow.FB.login(\r\n\t\t\t\t(response) => {\r\n\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\tapiLogin(response.authResponse.accessToken);\r\n\t\t\t\t},\r\n\t\t\t\t{ scope: \"public_profile,email\" },\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\tgetFacebookLoginStatus = async () => {\r\n\t\twindow.FB.getLoginStatus((response) => {\r\n\t\t\tconsole.log(response);\r\n\t\t\tif (response.authResponse === null) return;\r\n\t\t\tif ((response.status = \"connected\"))\r\n\t\t\t\tthis.fbAccessToken = response.authResponse.accessToken;\r\n\t\t});\r\n\t};\r\n\trefreshToken = async () => {\r\n\t\tthis.stopRefreshTokenTimeout();\r\n\t\ttry {\r\n\t\t\tconst user = await agent.Account.refreshToken();\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.user = user;\r\n\t\t\t\tstore.commonStore.setToken(user.token);\r\n\t\t\t\tthis.startRefreshTokenTimer(user);\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t};\r\n\tprivate startRefreshTokenTimer(user: User) {\r\n\t\tthis.refreshTokenTimeout = setTimeout(this.refreshToken, 300000);\r\n\t}\r\n\tprivate stopRefreshTokenTimeout() {\r\n\t\tclearTimeout(this.refreshTokenTimeout);\r\n\t}\r\n}\r\n","import { createContext, useContext } from \"react\";\nimport ActivityStore from \"./activityStore\";\nimport CommentStore from \"./commentStore\";\nimport CommonStore from \"./commonStore\";\nimport ModalStore from \"./modelStore\";\nimport ProfileStore from \"./ProfileStore\";\nimport UserStore from \"./UserStore\";\n\ninterface Store {\n\tactivityStore: ActivityStore;\n\tcommonStore: CommonStore;\n\tuserStore: UserStore;\n\tmodalStore: ModalStore;\n\tprofileStore: ProfileStore;\n\tcommentStore : CommentStore;\n}\n\nexport const store: Store = {\n\tactivityStore: new ActivityStore(),\n\tcommonStore: new CommonStore(),\n\tuserStore: new UserStore(),\n\tmodalStore: new ModalStore(),\n\tprofileStore: new ProfileStore(),\n\tcommentStore: new CommentStore(),\n};\n\nexport const StoreContext = createContext(store);\n\nexport const useStore = () => {\n\treturn useContext(StoreContext);\n};\n","import { makeAutoObservable, reaction } from \"mobx\";\nimport { ServerError } from \"../models/serverError\";\n\nexport default class CommonStore {\n\terror: ServerError | null = null;\n\ttoken: string | null = window.localStorage.getItem(\"jwt\");\n\tuploaded = false;\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\n\t\treaction(\n\t\t\t() => this.token,\n\t\t\t(token) => {\n\t\t\t\tif (token) {\n\t\t\t\t\twindow.localStorage.setItem(\"jwt\", token);\n\t\t\t\t} else {\n\t\t\t\t\twindow.localStorage.removeItem(\"jwt\");\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tsetServerError = (error: ServerError) => {\n\t\tthis.error = error;\n\t};\n\tsetToken = (token: string | null) => {\n\t\tthis.token = token;\n\t};\n\n\tsetUploaded = () => {\n\t\tthis.uploaded = true;\n\t};\n}\n","import { makeAutoObservable } from \"mobx\";\r\n\r\ninterface Modal {\r\n\topen: boolean;\r\n\tbody: JSX.Element | null;\r\n}\r\n\r\nexport default class ModalStore {\r\n\tmodal: Modal = {\r\n\t\topen: false,\r\n\t\tbody: null,\r\n\t};\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\topenModal = (content: JSX.Element) => {\r\n\t\tthis.modal.open = true;\r\n\t\tthis.modal.body = content;\r\n\t};\r\n\r\n\tcloseModal = () => {\r\n\t\tthis.modal.open = false;\r\n\t\tthis.modal.body = null;\r\n\t};\r\n}\r\n","import {\r\n\tHubConnection,\r\n\tHubConnectionBuilder,\r\n\tLogLevel,\r\n} from \"@microsoft/signalr\";\r\nimport { makeAutoObservable, runInAction } from \"mobx\";\r\nimport { ChatComment } from \"../models/comment\";\r\nimport { store } from \"./store\";\r\n\r\nexport default class CommentStore {\r\n\tcomments: ChatComment[] = [];\r\n\thubConnection: HubConnection | null = null;\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\tcreateHubConnection = (activityId: string) => {\r\n\t\tif (store.activityStore.selectedActivity) {\r\n\t\t\tthis.hubConnection = new HubConnectionBuilder()\r\n\t\t\t\t.withUrl(process.env.REACT_APP_CHAT_URL + \"?activityId=\" + activityId, {\r\n\t\t\t\t\taccessTokenFactory: () => store.userStore.user!.token,\r\n\t\t\t\t})\r\n\t\t\t\t.withAutomaticReconnect()\r\n\t\t\t\t.configureLogging(LogLevel.Information)\r\n\t\t\t\t.build();\r\n\t\t\tthis.hubConnection\r\n\t\t\t\t.start()\r\n\t\t\t\t.catch((err) => console.log(\"Error establishing the connection:\", err));\r\n\t\t\tthis.hubConnection.on(\"LoadComments\", (comments: ChatComment[]) => {\r\n\t\t\t\trunInAction(() => {\r\n\t\t\t\t\tcomments.forEach((comment) => {\r\n\t\t\t\t\t\tcomment.createdAt = new Date(comment.createdAt + \"Z\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.comments = comments;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.hubConnection.on(\"ReceiveComment\", (comment: ChatComment) => {\r\n\t\t\t\trunInAction(() => {\r\n\t\t\t\t\tcomment.createdAt = new Date(comment.createdAt);\r\n\t\t\t\t\tthis.comments.push(comment);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\tstopHubConnection = () => {\r\n\t\tthis.hubConnection\r\n\t\t\t?.stop()\r\n\t\t\t.catch((err) => console.log(\"Error Stopping connection:\", err));\r\n\t};\r\n\tclearComments = () => {\r\n\t\tthis.comments = [];\r\n\t\tthis.stopHubConnection();\r\n\t};\r\n\r\n\taddComment = async (values: any) => {\r\n\t\tvalues.activityId = store.activityStore.selectedActivity?.id;\r\n\t\ttry {\r\n\t\t\tawait this.hubConnection?.invoke(\"SendComment\", values);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t};\r\n}\r\n","import { observer } from \"mobx-react-lite\";\nimport React from \"react\";\nimport { Link, NavLink } from \"react-router-dom\";\nimport { Button, Container, Dropdown, Image, Menu } from \"semantic-ui-react\";\nimport { useStore } from \"../stores/store\";\n\nconst NavBar = () => {\n\tconst {\n\t\tuserStore: { user, logout, isLoggedIn },\n\t} = useStore();\n\treturn (\n\t\t<Menu inverted fixed=\"top\">\n\t\t\t<Container>\n\t\t\t\t<Menu.Item as={NavLink} exact to=\"/\" header>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc=\"/assets/logo.png\"\n\t\t\t\t\t\talt=\"logo\"\n\t\t\t\t\t\tstyle={{ marginRight: \"10px\" }}\n\t\t\t\t\t/>\n\t\t\t\t\tActivitiesBar\n\t\t\t\t</Menu.Item>\n\t\t\t\t{isLoggedIn && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Menu.Item as={NavLink} to=\"/activities\" name=\"Activities\" />\n\t\t\t\t\t\t<Menu.Item>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tas={NavLink}\n\t\t\t\t\t\t\t\tto=\"/createActivity\"\n\t\t\t\t\t\t\t\tpositive\n\t\t\t\t\t\t\t\tcontent=\"Create Activity\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t<Menu.Item position=\"right\">\n\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\tsrc={user?.image || \"assets/user.png\"}\n\t\t\t\t\t\t\t\tavatar\n\t\t\t\t\t\t\t\tspaced=\"right\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Dropdown pointing=\"top left\" text={user?.displayName}>\n\t\t\t\t\t\t\t\t<Dropdown.Menu>\n\t\t\t\t\t\t\t\t\t<Dropdown.Item\n\t\t\t\t\t\t\t\t\t\tas={Link}\n\t\t\t\t\t\t\t\t\t\tto={`/profiles/${user?.username}`}\n\t\t\t\t\t\t\t\t\t\ttext=\"My Profile\"\n\t\t\t\t\t\t\t\t\t\ticon=\"user\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Dropdown.Item text=\"Logout\" icon=\"power\" onClick={logout} />\n\t\t\t\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t</Menu>\n\t);\n};\n\nexport default observer(NavBar);\n","import { observer } from \"mobx-react-lite\";\nimport React from \"react\";\nimport Calendar from \"react-calendar\";\nimport { Header, Menu } from \"semantic-ui-react\";\nimport { useStore } from \"../../../app/stores/store\";\n\nconst ActivityFilters = () => {\n\tconst {\n\t\tactivityStore: { predicate, setPrediacte },\n\t} = useStore();\n\n\treturn (\n\t\t<>\n\t\t\t<Menu vertical size=\"large\" style={{ width: \"100%\", marginTop: 25 }}>\n\t\t\t\t<Header icon=\"filter\" attached color=\"teal\" content=\"Filters\" />\n\t\t\t\t<Menu.Item\n\t\t\t\t\tcontent=\"All Activities\"\n\t\t\t\t\tactive={predicate.has(\"all\")}\n\t\t\t\t\tonClick={() => setPrediacte(\"all\", \"true\")}\n\t\t\t\t/>\n\t\t\t\t<Menu.Item\n\t\t\t\t\tcontent=\"I'm going\"\n\t\t\t\t\tactive={predicate.has(\"isGoing\")}\n\t\t\t\t\tonClick={() => setPrediacte(\"isGoing\", \"true\")}\n\t\t\t\t/>\n\t\t\t\t<Menu.Item\n\t\t\t\t\tcontent=\"I'm hosting\"\n\t\t\t\t\tactive={predicate.has(\"isHost\")}\n\t\t\t\t\tonClick={() => setPrediacte(\"isHost\", \"true\")}\n\t\t\t\t/>\n\t\t\t</Menu>\n\t\t\t<Header />\n\t\t\t<Calendar\n\t\t\t\tcalendarType=\"Hebrew\"\n\t\t\t\tonChange={(date) => setPrediacte(\"startDate\", date as Date)}\n\t\t\t\tvalue={predicate.get(\"startDate\") || new Date()}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default observer(ActivityFilters);\n","import { observer } from \"mobx-react-lite\";\r\nimport React, { SyntheticEvent } from \"react\";\r\nimport { Button, Reveal } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../app/models/profile\";\r\nimport { useStore } from \"../../app/stores/store\";\r\n\r\ninterface Props {\r\n\tprofile: Profile;\r\n}\r\n\r\nconst FollowButton = ({ profile }: Props) => {\r\n\tconst { profileStore, userStore } = useStore();\r\n\tconst { updateFollowing, loading } = profileStore;\r\n\r\n\tif (userStore.user?.username === profile.userName) return null;\r\n\r\n\tconst handleFollow = (e: SyntheticEvent, username: string) => {\r\n\t\te.preventDefault();\r\n\t\tprofile.following\r\n\t\t\t? updateFollowing(username, false)\r\n\t\t\t: updateFollowing(username, true);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Reveal animated=\"move\">\r\n\t\t\t<Reveal.Content visible style={{ width: \"100%\" }}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tcolor=\"teal\"\r\n\t\t\t\t\tcontent={profile.following ? \"Following\" : \"Follow\"}\r\n\t\t\t\t/>\r\n\t\t\t</Reveal.Content>\r\n\t\t\t<Reveal.Content hidden style={{ width: \"100%\" }}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tbasic\r\n\t\t\t\t\tcolor={profile.following ? \"red\" : \"green\"}\r\n\t\t\t\t\tcontent={profile.following ? \"Unfollow\" : \"Follow\"}\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\tonClick={(e) => handleFollow(e, profile.userName)}\r\n\t\t\t\t/>\r\n\t\t\t</Reveal.Content>\r\n\t\t</Reveal>\r\n\t);\r\n};\r\n\r\nexport default observer(FollowButton);\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card, Icon, Image } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../app/models/profile\";\r\nimport FollowButton from \"./FollowButton\";\r\n\r\ninterface Props {\r\n\tprofile: Profile;\r\n}\r\n\r\nconst ProfileCard = ({ profile }: Props) => {\r\n\tconst truncate = (str: string | undefined) => {\r\n\t\tif (str) {\r\n\t\t\treturn str.length > 40 ? str.substring(0, 37) + \"...\" : str;\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<Card as={Link} to={`/profiles/${profile.userName}`}>\r\n\t\t\t<Image src={profile.image || \"/assets/user.png\"} />\r\n\t\t\t<Card.Content>\r\n\t\t\t\t<Card.Header>{profile.displayName}</Card.Header>\r\n\t\t\t\t<Card.Description>{truncate(profile.bio)}</Card.Description>\r\n\t\t\t</Card.Content>\r\n\t\t\t<Card.Content extra>\r\n\t\t\t\t<Icon name=\"user\" />\r\n\t\t\t\t{profile.followersCount}\r\n\t\t\t</Card.Content>\r\n\t\t\t<FollowButton profile={profile} />\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default observer(ProfileCard);\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Image, List, Popup } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../../app/models/profile\";\r\nimport ProfileCard from \"../../profiles/ProfileCard\";\r\n\r\ninterface Props {\r\n\tattendees: Profile[];\r\n}\r\n\r\nconst ActivityListItemAttendee = ({ attendees }: Props) => {\r\n\tconst style = {\r\n\t\tborderColor: \"orange\",\r\n\t\tborderWidth: 3,\r\n\t};\r\n\treturn (\r\n\t\t<List horizontal>\r\n\t\t\t{attendees.map((attendee) => (\r\n\t\t\t\t<Popup\r\n\t\t\t\t\thoverable\r\n\t\t\t\t\tkey={attendee.userName}\r\n\t\t\t\t\ttrigger={\r\n\t\t\t\t\t\t<List.Item\r\n\t\t\t\t\t\t\tkey={attendee.userName}\r\n\t\t\t\t\t\t\tas={Link}\r\n\t\t\t\t\t\t\tto={`/profiles/${attendee.userName}`}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\t\t\t\tcircular\r\n\t\t\t\t\t\t\t\tsrc={attendee.image || \"/assets/user.png\"}\r\n\t\t\t\t\t\t\t\tbordered\r\n\t\t\t\t\t\t\t\tstyle={attendee.following ? style : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</List.Item>\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Popup.Content>\r\n\t\t\t\t\t\t<ProfileCard profile={attendee} />\r\n\t\t\t\t\t</Popup.Content>\r\n\t\t\t\t</Popup>\r\n\t\t\t))}\r\n\t\t</List>\r\n\t);\r\n};\r\n\r\nexport default observer(ActivityListItemAttendee);\r\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button, Icon, Item, Label, Segment } from \"semantic-ui-react\";\nimport { Activity } from \"../../../app/models/activity\";\nimport { format } from \"date-fns\";\nimport ActivityListItemAttendee from \"./ActivityListItemAttendee\";\ninterface Props {\n\tactivity: Activity;\n}\n\nconst ActivityListItem = ({ activity }: Props) => {\n\treturn (\n\t\t<Segment.Group>\n\t\t\t<Segment>\n\t\t\t\t{activity.isCancelled && (\n\t\t\t\t\t<Label\n\t\t\t\t\t\tattached=\"top\"\n\t\t\t\t\t\tcolor=\"red\"\n\t\t\t\t\t\tcontent=\"Cancelled\"\n\t\t\t\t\t\tstyle={{ textAlign: \"center\" }}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<Item.Group>\n\t\t\t\t\t<Item>\n\t\t\t\t\t\t<Item.Image\n\t\t\t\t\t\t\tsize=\"tiny\"\n\t\t\t\t\t\t\tcircular\n\t\t\t\t\t\t\tsrc={activity.host?.image || \"/assets/user.png\"}\n\t\t\t\t\t\t\tstyle={{ marginBottom: 5 }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Item.Content>\n\t\t\t\t\t\t\t<Item.Header as={Link} to={`/activities/${activity.id}`}>\n\t\t\t\t\t\t\t\t{activity.title}\n\t\t\t\t\t\t\t</Item.Header>\n\t\t\t\t\t\t\t<Item.Description>\n\t\t\t\t\t\t\t\tHosted by{\" \"}\n\t\t\t\t\t\t\t\t<Link to={`/profiles/${activity.hostUsername}`}>\n\t\t\t\t\t\t\t\t\t{activity.hostUsername}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</Item.Description>\n\t\t\t\t\t\t\t{activity.isHost && (\n\t\t\t\t\t\t\t\t<Item.Description>\n\t\t\t\t\t\t\t\t\t<Label basic color=\"orange\">\n\t\t\t\t\t\t\t\t\t\tYou are hosting the activity\n\t\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t</Item.Description>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{activity.isGoing && !activity.isHost && (\n\t\t\t\t\t\t\t\t<Item.Description>\n\t\t\t\t\t\t\t\t\t<Label basic color=\"green\">\n\t\t\t\t\t\t\t\t\t\tYou are going to the activity\n\t\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t</Item.Description>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Item.Content>\n\t\t\t\t\t</Item>\n\t\t\t\t</Item.Group>\n\t\t\t</Segment>\n\t\t\t<Segment>\n\t\t\t\t<span>\n\t\t\t\t\t<Icon name=\"clock\" /> {format(activity.date!, \"dd MMM yyyy h:aa\")}\n\t\t\t\t\t<Icon name=\"marker\" /> {activity.venue}\n\t\t\t\t</span>\n\t\t\t</Segment>\n\t\t\t<Segment secondary>\n\t\t\t\t<ActivityListItemAttendee attendees={activity.attendees!} />\n\t\t\t</Segment>\n\t\t\t<Segment clearing>\n\t\t\t\t<span>{activity.description}</span>\n\t\t\t\t<Button\n\t\t\t\t\tas={Link}\n\t\t\t\t\tto={`/activities/${activity.id}`}\n\t\t\t\t\tcolor=\"teal\"\n\t\t\t\t\tfloated=\"right\"\n\t\t\t\t\tcontent=\"View\"\n\t\t\t\t/>\n\t\t\t</Segment>\n\t\t</Segment.Group>\n\t);\n};\n\nexport default ActivityListItem;\n","import { observer } from \"mobx-react-lite\";\nimport React, { Fragment } from \"react\";\nimport { Header } from \"semantic-ui-react\";\nimport { useStore } from \"../../../app/stores/store\";\nimport ActivityListItem from \"./ActivityListItem\";\n\nconst ActivityList = () => {\n\tconst { activityStore } = useStore();\n\tconst { groupedActivities } = activityStore;\n\n\treturn (\n\t\t<>\n\t\t\t{groupedActivities.map(([group, activities]) => (\n\t\t\t\t<Fragment key={group}>\n\t\t\t\t\t<Header sub color=\"teal\">\n\t\t\t\t\t\t{group}\n\t\t\t\t\t</Header>\n\t\t\t\t\t{activities.map((activity) => (\n\t\t\t\t\t\t<ActivityListItem key={activity.id} activity={activity} />\n\t\t\t\t\t))}\n\t\t\t\t</Fragment>\n\t\t\t))}\n\t\t</>\n\t);\n};\nexport default observer(ActivityList);\n","import React, { Fragment } from \"react\";\r\nimport { Button, Placeholder, Segment } from \"semantic-ui-react\";\r\n\r\nconst ActivityListItemPlaceHolder = () => {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Placeholder fluid style={{ marginTop: 25 }}>\r\n\t\t\t\t<Segment.Group>\r\n\t\t\t\t\t<Segment style={{ minHeight: 110 }}>\r\n\t\t\t\t\t\t<Placeholder>\r\n\t\t\t\t\t\t\t<Placeholder.Header image>\r\n\t\t\t\t\t\t\t\t<Placeholder.Line />\r\n\t\t\t\t\t\t\t\t<Placeholder.Line />\r\n\t\t\t\t\t\t\t</Placeholder.Header>\r\n\t\t\t\t\t\t\t<Placeholder.Paragraph>\r\n\t\t\t\t\t\t\t\t<Placeholder.Line />\r\n\t\t\t\t\t\t\t</Placeholder.Paragraph>\r\n\t\t\t\t\t\t</Placeholder>\r\n\t\t\t\t\t</Segment>\r\n\t\t\t\t\t<Segment>\r\n\t\t\t\t\t\t<Placeholder>\r\n\t\t\t\t\t\t\t<Placeholder.Line />\r\n\t\t\t\t\t\t\t<Placeholder.Line />\r\n\t\t\t\t\t\t</Placeholder>\r\n\t\t\t\t\t</Segment>\r\n\t\t\t\t\t<Segment secondary style={{ minHeight: 70 }} />\r\n\t\t\t\t\t<Segment clearing>\r\n\t\t\t\t\t\t<Button disabled color=\"blue\" floated=\"right\" content=\"View\" />\r\n\t\t\t\t\t</Segment>\r\n\t\t\t\t</Segment.Group>\r\n\t\t\t</Placeholder>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default ActivityListItemPlaceHolder;\r\n","import { observer } from \"mobx-react-lite\";\nimport React, { useEffect, useState } from \"react\";\nimport { Grid, Loader } from \"semantic-ui-react\";\nimport { PagingParams } from \"../../../app/models/pagination\";\nimport { useStore } from \"../../../app/stores/store\";\nimport ActivityFilters from \"./ActivityFilters\";\nimport ActivityList from \"./ActivityList\";\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport ActivityListItemPlaceHolder from \"./ActivityListItemPlaceHolder\";\n\nconst ActivityDashboard = () => {\n\tconst { activityStore } = useStore();\n\tconst { loadActivities, activityRegistry, setPagingParams, pagination } =\n\t\tactivityStore;\n\tconst [loadingNext, setLoadingNext] = useState(false);\n\n\tconst handleGetNext = () => {\n\t\tsetLoadingNext(true);\n\t\tsetPagingParams(new PagingParams(pagination!.currentPage + 1));\n\t\tloadActivities().then(() => setLoadingNext(false));\n\t};\n\n\tuseEffect(() => {\n\t\tif (activityRegistry.size <= 1) loadActivities();\n\t}, [activityRegistry.size, loadActivities]);\n\n\treturn (\n\t\t<Grid>\n\t\t\t<Grid.Column width=\"10\">\n\t\t\t\t{activityStore.loadingInitial && !loadingNext ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<ActivityListItemPlaceHolder />\n\t\t\t\t\t\t<ActivityListItemPlaceHolder />\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<InfiniteScroll\n\t\t\t\t\t\tpageStart={0}\n\t\t\t\t\t\tloadMore={handleGetNext}\n\t\t\t\t\t\thasMore={\n\t\t\t\t\t\t\t!loadingNext &&\n\t\t\t\t\t\t\t!!pagination &&\n\t\t\t\t\t\t\tpagination.currentPage < pagination.totalItems\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinitialLoad={false}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ActivityList />\n\t\t\t\t\t</InfiniteScroll>\n\t\t\t\t)}\n\t\t\t</Grid.Column>\n\t\t\t<Grid.Column width=\"6\">\n\t\t\t\t<ActivityFilters />\n\t\t\t</Grid.Column>\n\t\t\t<Grid.Column width={10}>\n\t\t\t\t<Loader active={loadingNext} />\n\t\t\t</Grid.Column>\n\t\t</Grid>\n\t);\n};\nexport default observer(ActivityDashboard);\n","import React from \"react\";\r\nimport { useField } from \"formik\";\r\nimport { Form, Label } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n\tplaceholder: string;\r\n\tname: string;\r\n\tlabel?: string;\r\n\ttype?:string\r\n}\r\n\r\nconst MyTextInput = (props: Props) => {\r\n\tconst [field, meta] = useField(props.name);\r\n\treturn (\r\n\t\t<Form.Field error={meta.touched && !!meta.error}>\r\n\t\t\t<label>{props.label}</label>\r\n\t\t\t<input {...field} {...props} />\r\n\t\t\t{meta.touched && meta.error ? (\r\n\t\t\t\t<Label basic color=\"red\">\r\n\t\t\t\t\t{meta.error}\r\n\t\t\t\t</Label>\r\n\t\t\t) : null}\r\n\t\t</Form.Field>\r\n\t);\r\n};\r\n\r\nexport default MyTextInput;\r\n","import { ErrorMessage, Form, Formik } from \"formik\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Button, Header, Label } from \"semantic-ui-react\";\r\nimport MyTextInput from \"../../app/common/form/MyTextInputs\";\r\nimport { useStore } from \"../../app/stores/store\";\r\n\r\nconst LoginForm = () => {\r\n\tconst { userStore } = useStore();\r\n\r\n\treturn (\r\n\t\t<Formik\r\n\t\t\tinitialValues={{ email: \"\", password: \"\", error: null }}\r\n\t\t\tonSubmit={(values, { setErrors }) =>\r\n\t\t\t\tuserStore\r\n\t\t\t\t\t.login(values)\r\n\t\t\t\t\t.catch((error) => setErrors({ error: error.response.data }))\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{({ handleSubmit, isSubmitting, errors }) => (\r\n\t\t\t\t<Form className=\"ui form\" onSubmit={handleSubmit} autoComplete=\"off\">\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\tas=\"h2\"\r\n\t\t\t\t\t\tcontent=\"Login to ActivitiesBar\"\r\n\t\t\t\t\t\tcolor=\"teal\"\r\n\t\t\t\t\t\ttextAlign=\"center\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<MyTextInput name=\"email\" placeholder=\"email\" />\r\n\t\t\t\t\t<MyTextInput name=\"password\" placeholder=\"password\" type=\"password\" />\r\n\t\t\t\t\t<ErrorMessage\r\n\t\t\t\t\t\tname=\"error\"\r\n\t\t\t\t\t\trender={() => (\r\n\t\t\t\t\t\t\t<Label\r\n\t\t\t\t\t\t\t\tstyle={{ marginBottom: 10 }}\r\n\t\t\t\t\t\t\t\tbasic\r\n\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\tcontent={errors.error}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tpositive\r\n\t\t\t\t\t\tcontent=\"Login\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tfluid\r\n\t\t\t\t\t\tloading={isSubmitting}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form>\r\n\t\t\t)}\r\n\t\t</Formik>\r\n\t);\r\n};\r\n\r\nexport default observer(LoginForm);\r\n","import React from \"react\";\nimport { Message } from \"semantic-ui-react\";\n\ninterface Props {\n\terrors: any;\n}\n\nconst ValidationErrors = ({ errors }: Props) => {\n\treturn (\n\t\t<Message error>\n\t\t\t{errors && (\n\t\t\t\t<Message.List>\n\t\t\t\t\t{errors.map((err: any, i: any) => (\n\t\t\t\t\t\t<Message.Item key={i}>{err}</Message.Item>\n\t\t\t\t\t))}\n\t\t\t\t</Message.List>\n\t\t\t)}\n\t\t</Message>\n\t);\n};\n\nexport default ValidationErrors;\n","import { ErrorMessage, Form, Formik } from \"formik\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Button, Header } from \"semantic-ui-react\";\r\nimport MyTextInput from \"../../app/common/form/MyTextInputs\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport * as Yup from \"yup\";\r\nimport ValidationErrors from \"../errors/ValidationErrors\";\r\n\r\nconst RegisterForm = () => {\r\n\tconst { userStore } = useStore();\r\n\r\n\treturn (\r\n\t\t<Formik\r\n\t\t\tinitialValues={{\r\n\t\t\t\tdisplayName: \"\",\r\n\t\t\t\tusername: \"\",\r\n\t\t\t\temail: \"\",\r\n\t\t\t\tpassword: \"\",\r\n\t\t\t\terror: null,\r\n\t\t\t}}\r\n\t\t\tonSubmit={(values, { setErrors }) =>\r\n\t\t\t\tuserStore.register(values).catch((error) => setErrors({ error }))\r\n\t\t\t}\r\n\t\t\tvalidationSchema={Yup.object({\r\n\t\t\t\tdisplayName: Yup.string().required(),\r\n\t\t\t\tusername: Yup.string().required(),\r\n\t\t\t\temail: Yup.string().required().email(),\r\n\t\t\t\tpassword: Yup.string().required(),\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{({ handleSubmit, isSubmitting, errors, isValid, dirty }) => (\r\n\t\t\t\t<Form\r\n\t\t\t\t\tclassName=\"ui form error\"\r\n\t\t\t\t\tonSubmit={handleSubmit}\r\n\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\tas=\"h2\"\r\n\t\t\t\t\t\tcontent=\"Sign up to ActivitiesBar\"\r\n\t\t\t\t\t\tcolor=\"teal\"\r\n\t\t\t\t\t\ttextAlign=\"center\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<MyTextInput name=\"displayName\" placeholder=\"Display name\" />\r\n\t\t\t\t\t<MyTextInput name=\"username\" placeholder=\"Username\" />\r\n\t\t\t\t\t<MyTextInput name=\"email\" placeholder=\"email\" />\r\n\t\t\t\t\t<MyTextInput name=\"password\" placeholder=\"password\" type=\"password\" />\r\n\t\t\t\t\t<ErrorMessage\r\n\t\t\t\t\t\tname=\"error\"\r\n\t\t\t\t\t\trender={() => <ValidationErrors errors={errors.error} />}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tpositive\r\n\t\t\t\t\t\tcontent=\"Register\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tfluid\r\n\t\t\t\t\t\tloading={isSubmitting}\r\n\t\t\t\t\t\tdisabled={!isValid || !dirty || isSubmitting}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form>\r\n\t\t\t)}\r\n\t\t</Formik>\r\n\t);\r\n};\r\n\r\nexport default observer(RegisterForm);\r\n","import { observer } from \"mobx-react-lite\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n\tContainer,\n\tHeader,\n\tSegment,\n\tImage,\n\tButton,\n\tDivider,\n} from \"semantic-ui-react\";\nimport { useStore } from \"../../app/stores/store\";\nimport LoginForm from \"../users/LoginForm\";\nimport RegisterForm from \"../users/RegisterForm\";\n\nconst HomePage = () => {\n\tconst { userStore, modalStore } = useStore();\n\treturn (\n\t\t<Segment inverted textAlign=\"center\" vertical className=\"masthead\">\n\t\t\t<Container text>\n\t\t\t\t<Header as=\"h1\" inverted>\n\t\t\t\t\t<Image\n\t\t\t\t\t\tsize=\"massive\"\n\t\t\t\t\t\tsrc=\"/assets/logo.png\"\n\t\t\t\t\t\talt=\"logo\"\n\t\t\t\t\t\tstyle={{ marginBottom: 12 }}\n\t\t\t\t\t/>\n\t\t\t\t\tActivitiesBar\n\t\t\t\t</Header>\n\t\t\t\t{userStore.isLoggedIn ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Header as=\"h2\" inverted content=\"Welcome to ActivitiesBar\" />\n\t\t\t\t\t\t<Button as={Link} to=\"/activities\" size=\"huge\" inverted>\n\t\t\t\t\t\t\tGo to Activities!\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => modalStore.openModal(<LoginForm />)}\n\t\t\t\t\t\t\tsize=\"huge\"\n\t\t\t\t\t\t\tinverted\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tLogin!\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => modalStore.openModal(<RegisterForm />)}\n\t\t\t\t\t\t\tsize=\"huge\"\n\t\t\t\t\t\t\tinverted\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRegister!\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Divider horizontal inverted>\n\t\t\t\t\t\t\tOr\n\t\t\t\t\t\t</Divider>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"huge\"\n\t\t\t\t\t\t\tinverted\n\t\t\t\t\t\t\tcolor=\"facebook\"\n\t\t\t\t\t\t\tcontent=\"Login with Facebook\"\n\t\t\t\t\t\t\tonClick={userStore.facebookLogin}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t</Segment>\n\t);\n};\nexport default observer(HomePage);\n","import React from \"react\";\nimport { Dimmer, Loader } from \"semantic-ui-react\";\n\ninterface Props {\n\tinverted?: boolean;\n\tcontent?: string;\n}\n\nconst LoadingComponent = ({\n\tinverted = true,\n\tcontent = \"Loading...\",\n}: Props) => {\n\treturn (\n\t\t<Dimmer active={true} inverted={inverted}>\n\t\t\t<Loader content={content} />\n\t\t</Dimmer>\n\t);\n};\nexport default LoadingComponent;\n","import React from \"react\";\r\nimport { useField } from \"formik\";\r\nimport { Form, Label } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n\tplaceholder: string;\r\n\tname: string;\r\n\trows: number;\r\n\tlabel?: string;\r\n}\r\n\r\nconst MyTextArea = (props: Props) => {\r\n\tconst [field, meta] = useField(props.name);\r\n\treturn (\r\n\t\t<Form.Field error={meta.touched && !!meta.error}>\r\n\t\t\t<label>{props.label}</label>\r\n\t\t\t<textarea {...field} {...props} />\r\n\t\t\t{meta.touched && meta.error ? (\r\n\t\t\t\t<Label basic color=\"red\">\r\n\t\t\t\t\t{meta.error}\r\n\t\t\t\t</Label>\r\n\t\t\t) : null}\r\n\t\t</Form.Field>\r\n\t);\r\n};\r\n\r\nexport default MyTextArea;\r\n","import React from \"react\";\r\nimport { useField } from \"formik\";\r\nimport { Form, Label, Select } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n\tplaceholder: string;\r\n\tname: string;\r\n\toptions: any;\r\n\tlabel?: string;\r\n}\r\n\r\nconst MySelectInput = (props: Props) => {\r\n\tconst [field, meta, helpers] = useField(props.name);\r\n\treturn (\r\n\t\t<Form.Field error={meta.touched && !!meta.error}>\r\n\t\t\t<label>{props.label}</label>\r\n\t\t\t<Select\r\n\t\t\t\tclearable\r\n\t\t\t\toptions={props.options}\r\n\t\t\t\tvalue={field.value || null}\r\n\t\t\t\tonChange={(event, data) => helpers.setValue(data.value)}\r\n                onBlur={()=>helpers.setTouched(true)}\r\n                placeholder={props.placeholder}\r\n\t\t\t/>\r\n\t\t\t{meta.touched && meta.error ? (\r\n\t\t\t\t<Label basic color=\"red\">\r\n\t\t\t\t\t{meta.error}\r\n\t\t\t\t</Label>\r\n\t\t\t) : null}\r\n\t\t</Form.Field>\r\n\t);\r\n};\r\n\r\nexport default MySelectInput;\r\n","import React from \"react\";\r\nimport { useField } from \"formik\";\r\nimport { Form, Label } from \"semantic-ui-react\";\r\nimport DatePicker, { ReactDatePickerProps } from \"react-datepicker\";\r\n\r\nconst MyDateInput = (props: Partial<ReactDatePickerProps>) => {\r\n\tconst [field, meta, helpers] = useField(props.name!);\r\n\treturn (\r\n\t\t<Form.Field error={meta.touched && !!meta.error}>\r\n\t\t\t<DatePicker\r\n\t\t\t\t{...field}\r\n\t\t\t\t{...props}\r\n\t\t\t\tselected={(field.value && new Date(field.value)) || null}\r\n\t\t\t\tonChange={(value) => helpers.setValue(value)}\r\n\t\t\t/>\r\n\t\t\t{meta.touched && meta.error ? (\r\n\t\t\t\t<Label basic color=\"red\">\r\n\t\t\t\t\t{meta.error}\r\n\t\t\t\t</Label>\r\n\t\t\t) : null}\r\n\t\t</Form.Field>\r\n\t);\r\n};\r\n\r\nexport default MyDateInput;\r\n","export const categoryOptions = [\r\n\t{ text: \"Drinks\", value: \"drinks\" },\r\n\t{ text: \"Culture\", value: \"culture\" },\r\n\t{ text: \"Film\", value: \"film\" },\r\n\t{ text: \"Food\", value: \"food\" },\r\n\t{ text: \"Music\", value: \"music\" },\r\n\t{ text: \"Travel\", value: \"travel\" },\r\n];\r\n","import React, { useEffect, useState } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport { Button, Header, Segment } from \"semantic-ui-react\";\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\nimport { useStore } from \"../../../app/stores/store\";\nimport { v4 as uuid } from \"uuid\";\nimport { Formik, Form } from \"formik\";\nimport * as Yup from \"yup\";\nimport MyTextInput from \"../../../app/common/form/MyTextInputs\";\nimport MyTextArea from \"../../../app/common/form/MyTextArea\";\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\nimport MyDateInput from \"../../../app/common/form/MyDateInput\";\nimport { categoryOptions } from \"../../../app/common/options/categoryOptions\";\nimport { ActivityFormValues } from \"../../../app/models/activity\";\n\nconst ActivityForm = () => {\n\tconst history = useHistory();\n\tconst { activityStore } = useStore();\n\tconst { createActivity, updateActivity, loadActivity, loadingInitial } =\n\t\tactivityStore;\n\tconst { id } = useParams<{ id: string }>();\n\n\tconst [activity, setActivity] = useState<ActivityFormValues>(\n\t\tnew ActivityFormValues(),\n\t);\n\n\tconst validationSchema = Yup.object({\n\t\ttitle: Yup.string().required(\"The activity title is required\"),\n\t\tdescription: Yup.string().required(\"The activity description is required\"),\n\t\tcategory: Yup.string().required(),\n\t\tdate: Yup.string().required(\"Date is required\").nullable(),\n\t\tcity: Yup.string().required(),\n\t\tvenue: Yup.string().required(),\n\t});\n\n\tuseEffect(() => {\n\t\tif (id)\n\t\t\tloadActivity(id).then((activity) =>\n\t\t\t\tsetActivity(new ActivityFormValues(activity)),\n\t\t\t);\n\t}, [id, loadActivity]);\n\n\tconst handleFormSubmit = (activity: ActivityFormValues) => {\n\t\tif (!activity.id) {\n\t\t\tlet newActivity = {\n\t\t\t\t...activity,\n\t\t\t\tid: uuid(),\n\t\t\t};\n\t\t\tcreateActivity(newActivity).then(() =>\n\t\t\t\thistory.push(`/activities/${newActivity.id}`),\n\t\t\t);\n\t\t} else {\n\t\t\tupdateActivity(activity).then(() =>\n\t\t\t\thistory.push(`/activities/${activity.id}`),\n\t\t\t);\n\t\t}\n\t};\n\n\tif (loadingInitial) return <LoadingComponent content=\"Loading activity...\" />;\n\n\treturn (\n\t\t<Segment clearing>\n\t\t\t<Header content=\"Activity Details\" subheader color=\"teal\" />\n\t\t\t<Formik\n\t\t\t\tinitialValues={activity}\n\t\t\t\tonSubmit={(values) => handleFormSubmit(values)}\n\t\t\t\tenableReinitialize\n\t\t\t\tvalidationSchema={validationSchema}\n\t\t\t>\n\t\t\t\t{({ handleSubmit, isValid, isSubmitting, dirty }) => (\n\t\t\t\t\t<Form className=\"ui form\" onSubmit={handleSubmit} autoComplete=\"off\">\n\t\t\t\t\t\t<MyTextInput placeholder=\"Title\" name=\"title\" />\n\t\t\t\t\t\t<MyTextArea placeholder=\"Description\" name=\"description\" rows={3} />\n\t\t\t\t\t\t<MySelectInput\n\t\t\t\t\t\t\tplaceholder=\"Category\"\n\t\t\t\t\t\t\tname=\"category\"\n\t\t\t\t\t\t\toptions={categoryOptions}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<MyDateInput\n\t\t\t\t\t\t\tplaceholderText=\"Date\"\n\t\t\t\t\t\t\tname=\"date\"\n\t\t\t\t\t\t\tshowTimeSelect\n\t\t\t\t\t\t\ttimeCaption=\"time\"\n\t\t\t\t\t\t\tdateFormat=\"MMMM d, yyyy h:mm aa\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Header content=\"Location Details\" subheader color=\"teal\" />\n\n\t\t\t\t\t\t<MyTextInput placeholder=\"City\" name=\"city\" />\n\t\t\t\t\t\t<MyTextInput placeholder=\"Venue\" name=\"venue\" />\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tloading={isSubmitting}\n\t\t\t\t\t\t\tfloated=\"right\"\n\t\t\t\t\t\t\tpositive\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tcontent=\"Submit\"\n\t\t\t\t\t\t\tdisabled={!isValid || isSubmitting || !dirty}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tas={Link}\n\t\t\t\t\t\t\tto=\"/activities\"\n\t\t\t\t\t\t\tfloated=\"right\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tcontent=\"Cancel\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Form>\n\t\t\t\t)}\n\t\t\t</Formik>\n\t\t</Segment>\n\t);\n};\n\nexport default observer(ActivityForm);\n","import { Formik, Form, Field, FieldProps } from \"formik\";\nimport { observer } from \"mobx-react-lite\";\nimport React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Segment, Header, Comment, Loader } from \"semantic-ui-react\";\nimport { useStore } from \"../../../app/stores/store\";\nimport * as Yup from \"yup\";\nimport { formatDistanceToNow } from \"date-fns\";\n\ninterface Props {\n\tactivityId: string;\n}\n\nconst ActivityDetailedChat = ({ activityId }: Props) => {\n\tconst { commentStore } = useStore();\n\n\tuseEffect(() => {\n\t\tif (activityId) {\n\t\t\tcommentStore.createHubConnection(activityId);\n\t\t}\n\t\treturn () => {\n\t\t\tcommentStore.clearComments();\n\t\t};\n\t}, [activityId, commentStore]);\n\n\treturn (\n\t\t<>\n\t\t\t<Segment\n\t\t\t\ttextAlign=\"center\"\n\t\t\t\tattached=\"top\"\n\t\t\t\tinverted\n\t\t\t\tcolor=\"teal\"\n\t\t\t\tstyle={{ border: \"none\" }}\n\t\t\t>\n\t\t\t\t<Header>Chat about this event</Header>\n\t\t\t</Segment>\n\t\t\t<Segment attached clearing>\n\t\t\t\t<Comment.Group>\n\t\t\t\t\t{commentStore.comments.map((comment) => (\n\t\t\t\t\t\t<Comment key={comment.id}>\n\t\t\t\t\t\t\t<Comment.Avatar src={comment.image || \"/assets/user.png\"} />\n\t\t\t\t\t\t\t<Comment.Content>\n\t\t\t\t\t\t\t\t<Comment.Author as={Link} to={`profiles/${comment.username}`}>\n\t\t\t\t\t\t\t\t\t{comment.displayName}\n\t\t\t\t\t\t\t\t</Comment.Author>\n\t\t\t\t\t\t\t\t<Comment.Metadata>\n\t\t\t\t\t\t\t\t\t<div>{formatDistanceToNow(comment.createdAt)} ago </div>\n\t\t\t\t\t\t\t\t</Comment.Metadata>\n\t\t\t\t\t\t\t\t<Comment.Text style={{ whiteSpace: \"pre-wrap\" }}>\n\t\t\t\t\t\t\t\t\t{comment.body}\n\t\t\t\t\t\t\t\t</Comment.Text>\n\t\t\t\t\t\t\t</Comment.Content>\n\t\t\t\t\t\t</Comment>\n\t\t\t\t\t))}\n\t\t\t\t\t<Formik\n\t\t\t\t\t\tonSubmit={(values, { resetForm }) =>\n\t\t\t\t\t\t\tcommentStore.addComment(values).then(() => resetForm())\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinitialValues={{ body: \"\" }}\n\t\t\t\t\t\tvalidationSchema={Yup.object({\n\t\t\t\t\t\t\tbody: Yup.string().required(),\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ isSubmitting, isValid, handleSubmit }) => (\n\t\t\t\t\t\t\t<Form className=\"ui form\">\n\t\t\t\t\t\t\t\t<Field name=\"body\">\n\t\t\t\t\t\t\t\t\t{(props: FieldProps) => (\n\t\t\t\t\t\t\t\t\t\t<div style={{ position: \"relative\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<Loader active={isSubmitting} />\n\t\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your comment (Enter to submit,Shift + Enter for new line)\"\n\t\t\t\t\t\t\t\t\t\t\t\trows={2}\n\t\t\t\t\t\t\t\t\t\t\t\t{...props.field}\n\t\t\t\t\t\t\t\t\t\t\t\tonKeyPress={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === \"Enter\" && e.shiftKey) return;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === \"Enter\" && !e.shiftKey) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisValid && handleSubmit();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Formik>\n\t\t\t\t</Comment.Group>\n\t\t\t</Segment>\n\t\t</>\n\t);\n};\nexport default observer(ActivityDetailedChat);\n","import { format } from \"date-fns\";\nimport { observer } from \"mobx-react-lite\";\nimport React from \"react\";\nimport { Segment, Grid, Icon } from \"semantic-ui-react\";\nimport { Activity } from \"../../../app/models/activity\";\n\ninterface Props {\n\tactivity: Activity;\n}\n\nconst ActivityDetailedInfo = ({ activity }: Props) => {\n\treturn (\n\t\t<Segment.Group>\n\t\t\t<Segment attached=\"top\">\n\t\t\t\t<Grid>\n\t\t\t\t\t<Grid.Column width={1}>\n\t\t\t\t\t\t<Icon size=\"large\" color=\"teal\" name=\"info\" />\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={15}>\n\t\t\t\t\t\t<p>{activity.description}</p>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Segment>\n\t\t\t<Segment attached>\n\t\t\t\t<Grid verticalAlign=\"middle\">\n\t\t\t\t\t<Grid.Column width={1}>\n\t\t\t\t\t\t<Icon name=\"calendar\" size=\"large\" color=\"teal\" />\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={15}>\n\t\t\t\t\t\t<span>{format(activity.date!,'dd MMM yyyy h:mm aa') }</span>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Segment>\n\t\t\t<Segment attached>\n\t\t\t\t<Grid verticalAlign=\"middle\">\n\t\t\t\t\t<Grid.Column width={1}>\n\t\t\t\t\t\t<Icon name=\"marker\" size=\"large\" color=\"teal\" />\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={11}>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{activity.venue}, {activity.city}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Segment>\n\t\t</Segment.Group>\n\t);\n};\nexport default observer(ActivityDetailedInfo);\n","import React from \"react\";\nimport { Segment, List, Label, Item, Image } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\nimport { observer } from \"mobx-react-lite\";\nimport { Activity } from \"../../../app/models/activity\";\n\ninterface Props {\n\tactivity: Activity;\n}\n\nconst ActivityDetailedSidebar = ({ activity: { attendees, host } }: Props) => {\n\tif (!attendees) return null;\n\treturn (\n\t\t<>\n\t\t\t<Segment\n\t\t\t\ttextAlign=\"center\"\n\t\t\t\tstyle={{ border: \"none\" }}\n\t\t\t\tattached=\"top\"\n\t\t\t\tsecondary\n\t\t\t\tinverted\n\t\t\t\tcolor=\"teal\"\n\t\t\t>\n\t\t\t\t{attendees.length === 1 ? \" One Person\" : ` ${attendees.length} People`}{\" \"}\n\t\t\t\tgoing\n\t\t\t</Segment>\n\t\t\t<Segment attached>\n\t\t\t\t<List relaxed divided>\n\t\t\t\t\t{attendees.map((attendee) => (\n\t\t\t\t\t\t<Item style={{ position: \"relative\" }} key={attendee.userName}>\n\t\t\t\t\t\t\t{attendee.userName === host?.userName && (\n\t\t\t\t\t\t\t\t<Label\n\t\t\t\t\t\t\t\t\tstyle={{ position: \"absolute\" }}\n\t\t\t\t\t\t\t\t\tcolor=\"orange\"\n\t\t\t\t\t\t\t\t\tribbon=\"right\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tHost\n\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<Image size=\"tiny\" src={attendee.image || \"/assets/user.png\"} />\n\t\t\t\t\t\t\t<Item.Content verticalAlign=\"middle\">\n\t\t\t\t\t\t\t\t<Item.Header as=\"h3\">\n\t\t\t\t\t\t\t\t\t<Link to={`/profile/${attendee.userName}`}>\n\t\t\t\t\t\t\t\t\t\t{attendee.displayName}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Item.Header>\n\t\t\t\t\t\t\t\t{attendee.following &&\n\t\t\t\t\t\t\t\t<Item.Extra style={{ color: \"orange\" }}>Following</Item.Extra>}\n\t\t\t\t\t\t\t</Item.Content>\n\t\t\t\t\t\t</Item>\n\t\t\t\t\t))}\n\t\t\t\t</List>\n\t\t\t</Segment>\n\t\t</>\n\t);\n};\n\nexport default observer(ActivityDetailedSidebar);\n","import { observer } from \"mobx-react-lite\";\nimport React from \"react\";\nimport { Button, Header, Item, Segment, Image, Label } from \"semantic-ui-react\";\nimport { Activity } from \"../../../app/models/activity\";\nimport { Link } from \"react-router-dom\";\nimport { format } from \"date-fns\";\nimport { useStore } from \"../../../app/stores/store\";\n\nconst activityImageStyle = {\n\tfilter: \"brightness(30%)\",\n};\n\nconst activityImageTextStyle = {\n\tposition: \"absolute\",\n\tbottom: \"5%\",\n\tleft: \"5%\",\n\twidth: \"100%\",\n\theight: \"auto\",\n\tcolor: \"white\",\n};\n\ninterface Props {\n\tactivity: Activity;\n}\n\nconst ActivityDetailedHeader = ({ activity }: Props) => {\n\tconst {\n\t\tactivityStore: { updateAttendance, loading, cancelActivityToggle },\n\t} = useStore();\n\treturn (\n\t\t<Segment.Group>\n\t\t\t{activity.isCancelled && (\n\t\t\t\t<Label\n\t\t\t\t\tstyle={{ position: \"absolute\", zIndex: 100, left: -14, top: 20 }}\n\t\t\t\t\tribbon\n\t\t\t\t\tcolor=\"red\"\n\t\t\t\t\tcontent=\"Cancelled\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<Segment basic attached=\"top\" style={{ padding: \"0\" }}>\n\t\t\t\t<Image\n\t\t\t\t\tsrc={`/assets/categoryImages/${activity.category}.jpg`}\n\t\t\t\t\tfluid\n\t\t\t\t\tstyle={activityImageStyle}\n\t\t\t\t/>\n\t\t\t\t<Segment style={activityImageTextStyle} basic>\n\t\t\t\t\t<Item.Group>\n\t\t\t\t\t\t<Item>\n\t\t\t\t\t\t\t<Item.Content>\n\t\t\t\t\t\t\t\t<Header\n\t\t\t\t\t\t\t\t\tsize=\"huge\"\n\t\t\t\t\t\t\t\t\tcontent={activity.title}\n\t\t\t\t\t\t\t\t\tstyle={{ color: \"white\" }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<p>{format(activity.date!, \"ddd MMM yyyy\")}</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tHosted by{\" \"}\n\t\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t\t<Link to={`/profiles/${activity.host?.displayName}`}>\n\t\t\t\t\t\t\t\t\t\t\t{activity.host?.displayName}\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</Item.Content>\n\t\t\t\t\t\t</Item>\n\t\t\t\t\t</Item.Group>\n\t\t\t\t</Segment>\n\t\t\t</Segment>\n\t\t\t<Segment clearing attached=\"bottom\">\n\t\t\t\t{activity.isHost ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tcolor={activity.isCancelled ? \"green\" : \"red\"}\n\t\t\t\t\t\t\tfloated=\"left\"\n\t\t\t\t\t\t\tbasic\n\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\tactivity.isCancelled\n\t\t\t\t\t\t\t\t\t? \"Re-activate Activity\"\n\t\t\t\t\t\t\t\t\t: \"Cancel Activity\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={cancelActivityToggle}\n\t\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={activity.isCancelled}\n\t\t\t\t\t\t\tcolor=\"orange\"\n\t\t\t\t\t\t\tfloated=\"right\"\n\t\t\t\t\t\t\tas={Link}\n\t\t\t\t\t\t\tto={`/manage/${activity.id}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tManage Event\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t) : activity.isGoing ? (\n\t\t\t\t\t<Button onClick={updateAttendance} loading={loading}>\n\t\t\t\t\t\tCancel attendance\n\t\t\t\t\t</Button>\n\t\t\t\t) : (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tcolor=\"teal\"\n\t\t\t\t\t\tonClick={updateAttendance}\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\tdisabled={activity.isCancelled}\n\t\t\t\t\t>\n\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\tJoin Activity\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t</Segment>\n\t\t</Segment.Group>\n\t);\n};\n\nexport default observer(ActivityDetailedHeader);\n","import { observer } from \"mobx-react-lite\";\nimport React, { useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Grid } from \"semantic-ui-react\";\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\nimport { useStore } from \"../../../app/stores/store\";\nimport ActivityDetailedChat from \"./ActivityDetailedChat\";\nimport ActivityDetailedInfo from \"./ActivityDetailedInfo\";\nimport ActivityDetailedSidebar from \"./ActivityDetailedSidebar\";\nimport ActivityDetailedHeader from \"./ActivityDetaledHeader\";\n\nconst ActivityDetails = () => {\n\tconst { activityStore } = useStore();\n\tconst {\n\t\tselectedActivity: activity,\n\t\tloadActivity,\n\t\tloadingInitial,\n\t\tclearSelectedActivity,\n\t} = activityStore;\n\tconst { id } = useParams<{ id: string }>();\n\n\tuseEffect(() => {\n\t\tif (id) loadActivity(id);\n\t\treturn () => clearSelectedActivity();\n\t}, [id, loadActivity,clearSelectedActivity\n\t]);\n\n\tif (loadingInitial || !activity) return <LoadingComponent />;\n\n\treturn (\n\t\t<Grid>\n\t\t\t<Grid.Column width={10}>\n\t\t\t\t<ActivityDetailedHeader activity={activity} />\n\t\t\t\t<ActivityDetailedInfo activity={activity} />\n\t\t\t\t<ActivityDetailedChat activityId={activity.id} />\n\t\t\t</Grid.Column>\n\t\t\t<Grid.Column width={6}>\n\t\t\t\t<ActivityDetailedSidebar activity={activity} />\n\t\t\t</Grid.Column>\n\t\t</Grid>\n\t);\n};\nexport default observer(ActivityDetails);\n","import React, { useState } from \"react\";\nimport { Button, Header, Segment } from \"semantic-ui-react\";\nimport axios from \"axios\";\nimport ValidationErrors from \"./ValidationErrors\";\n\nconst TestErrors = () => {\n\tconst baseUrl = process.env.REACT_APP_API_URL;\n\tconst [errors, setErrors] = useState(null);\n\n\tconst handleNotFound = () => {\n\t\taxios\n\t\t\t.get(baseUrl + \"buggy/not-found\")\n\t\t\t.catch((err) => console.log(err.response));\n\t};\n\n\tconst handleBadRequest = () => {\n\t\taxios\n\t\t\t.get(baseUrl + \"buggy/bad-request\")\n\t\t\t.catch((err) => console.log(err.response));\n\t};\n\n\tconst handleServerError = () => {\n\t\taxios\n\t\t\t.get(baseUrl + \"buggy/server-error\")\n\t\t\t.catch((err) => console.log(err.response));\n\t};\n\n\tconst handleUnauthorised = () => {\n\t\taxios\n\t\t\t.get(baseUrl + \"buggy/unauthorised\")\n\t\t\t.catch((err) => console.log(err.response));\n\t};\n\n\tconst handleBadGuid = () => {\n\t\taxios.get(baseUrl + \"activities/notaguid\").catch((err) => console.log(err));\n\t};\n\n\tconst handleValidationError = () => {\n\t\taxios.post(baseUrl + \"activities\", {}).catch((err) => setErrors(err));\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Header as=\"h1\" content=\"Test Error component\" />\n\t\t\t<Segment>\n\t\t\t\t<Button.Group widths=\"7\">\n\t\t\t\t\t<Button onClick={handleNotFound} content=\"Not Found\" basic primary />\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={handleBadRequest}\n\t\t\t\t\t\tcontent=\"Bad Request\"\n\t\t\t\t\t\tbasic\n\t\t\t\t\t\tprimary\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={handleValidationError}\n\t\t\t\t\t\tcontent=\"Validation Error\"\n\t\t\t\t\t\tbasic\n\t\t\t\t\t\tprimary\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={handleServerError}\n\t\t\t\t\t\tcontent=\"Server Error\"\n\t\t\t\t\t\tbasic\n\t\t\t\t\t\tprimary\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={handleUnauthorised}\n\t\t\t\t\t\tcontent=\"Unauthorised\"\n\t\t\t\t\t\tbasic\n\t\t\t\t\t\tprimary\n\t\t\t\t\t/>\n\t\t\t\t\t<Button onClick={handleBadGuid} content=\"Bad Guid\" basic primary />\n\t\t\t\t</Button.Group>\n\t\t\t</Segment>\n\t\t\t{errors && <ValidationErrors errors={errors} />}\n\t\t</>\n\t);\n};\nexport default TestErrors;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button, Header, Icon, Segment } from \"semantic-ui-react\";\n\nconst NotFound = () => {\n\treturn (\n\t\t<Segment placeholder>\n\t\t\t<Header icon>\n\t\t\t\t<Icon name=\"search\" />\n\t\t\t\tOops - we've looked everywhere and could not find this.\n\t\t\t</Header>\n\t\t\t<Segment.Inline>\n\t\t\t\t<Button as={Link} to=\"/activities\" primary>\n\t\t\t\t\tReturn to activities page\n\t\t\t\t</Button>\n\t\t\t</Segment.Inline>\n\t\t</Segment>\n\t);\n};\nexport default NotFound;\n","import { observer } from \"mobx-react-lite\";\nimport React from \"react\";\nimport { Container, Header, Segment } from \"semantic-ui-react\";\nimport { useStore } from \"../../app/stores/store\";\n\nconst ServerError = () => {\n\tconst { commonStore } = useStore();\n\n\treturn (\n\t\t<Container>\n\t\t\t<Header as=\"h1\" content=\"Server Error\" />\n\t\t\t{commonStore.error && (\n\t\t\t\t<Segment>\n\t\t\t\t\t<Header as=\"h4\" content=\"Stack trace\" color=\"teal\" />\n\t\t\t\t\t<code style={{ marginTop: \"10px\" }}>{commonStore.error}</code>\n\t\t\t\t</Segment>\n\t\t\t)}\n\t\t</Container>\n\t);\n};\n\nexport default observer(ServerError);\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Modal } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../stores/store\";\r\n\r\nconst ModalContainer = () => {\r\n\tconst { modalStore } = useStore();\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\topen={modalStore.modal.open}\r\n\t\t\tonClose={modalStore.closeModal}\r\n\t\t\tsize=\"mini\"\r\n\t\t>\r\n\t\t\t<Modal.Content>{modalStore.modal.body}</Modal.Content>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default observer(ModalContainer);\r\n","import { Form, Formik } from \"formik\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Button } from \"semantic-ui-react\";\r\nimport MyTextArea from \"../../app/common/form/MyTextArea\";\r\nimport MyTextInput from \"../../app/common/form/MyTextInputs\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport * as Yup from \"yup\";\r\n\r\ninterface Props {\r\n\tsetEditMode: (editMode: boolean) => void;\r\n}\r\n\r\nconst ProfileEditForm = ({ setEditMode }: Props) => {\r\n\tconst {\r\n\t\tprofileStore: { profile, updateProfile },\r\n\t} = useStore();\r\n\treturn (\r\n\t\t<Formik\r\n\t\t\tinitialValues={{ displayName: profile?.displayName, bio: profile?.bio }}\r\n\t\t\tonSubmit={(values) => {\r\n\t\t\t\tupdateProfile(values).then(() => {\r\n\t\t\t\t\tsetEditMode(false);\r\n\t\t\t\t});\r\n\t\t\t}}\r\n\t\t\tvalidationSchema={Yup.object({\r\n\t\t\t\tdisplayName: Yup.string().required(),\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{({ isSubmitting, isValid, dirty }) => (\r\n\t\t\t\t<Form className=\"ui form\">\r\n\t\t\t\t\t<MyTextInput placeholder=\"Display Name\" name=\"displayName\" />\r\n\t\t\t\t\t<MyTextArea rows={3} placeholder=\"Add your bio\" name=\"bio\" />\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tpositive\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tloading={isSubmitting}\r\n\t\t\t\t\t\tcontent=\"Update profile\"\r\n\t\t\t\t\t\tfloated=\"right\"\r\n\t\t\t\t\t\tdisabled={!isValid || !dirty}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form>\r\n\t\t\t)}\r\n\t\t</Formik>\r\n\t);\r\n};\r\n\r\nexport default observer(ProfileEditForm);\r\n","import React, { useState } from \"react\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport { Button, Grid, Header, Tab } from \"semantic-ui-react\";\r\nimport ProfileEditForm from \"./ProfileEditForm\";\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nconst ProfileAbout = () => {\r\n\tconst { profileStore } = useStore();\r\n\tconst { isCurrentUser, profile } = profileStore;\r\n\tconst [editMode, setEditMode] = useState(false);\r\n\r\n\treturn (\r\n\t\t<Tab.Pane>\r\n\t\t\t<Grid>\r\n\t\t\t\t<Grid.Column width=\"16\">\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\tfloated=\"left\"\r\n\t\t\t\t\t\ticon=\"user\"\r\n\t\t\t\t\t\tcontent={`About ${profile?.displayName}`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{isCurrentUser && (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tfloated=\"right\"\r\n\t\t\t\t\t\t\tbasic\r\n\t\t\t\t\t\t\tcontent={editMode ? \"Cancel\" : \"Edit Profile\"}\r\n\t\t\t\t\t\t\tonClick={() => setEditMode(!editMode)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t\t<Grid.Column width=\"16\">\r\n\t\t\t\t\t{editMode ? (\r\n\t\t\t\t\t\t<ProfileEditForm setEditMode={setEditMode} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<span style={{ whiteSpace: \"pre-wrap\" }}>{profile?.bio}</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t</Grid>\r\n\t\t</Tab.Pane>\r\n\t);\r\n};\r\n\r\nexport default observer(ProfileAbout);\r\n","import React from \"react\";\r\nimport { Cropper } from \"react-cropper\";\r\nimport \"cropperjs/dist/cropper.css\";\r\n\r\ninterface Props {\r\n\timagePreview: string;\r\n\tsetCropper: (cropper: Cropper) => void;\r\n}\r\n\r\nconst PhotoWidgetCropper = ({ imagePreview, setCropper }: Props) => {\r\n\treturn (\r\n\t\t<Cropper\r\n\t\t\tsrc={imagePreview}\r\n\t\t\tstyle={{ height: 200, width: \"100%\" }}\r\n\t\t\tinitialAspectRatio={1}\r\n\t\t\taspectRatio={1}\r\n\t\t\tpreview=\".img-preview\"\r\n\t\t\tguides={false}\r\n\t\t\tviewMode={1}\r\n\t\t\tautoCropArea={1}\r\n\t\t\tbackground={false}\r\n\t\t\tonInitialized={(cropper) => setCropper(cropper)}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default PhotoWidgetCropper;\r\n","import React, { useCallback } from \"react\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { Header, Icon } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n\tsetFiles: (files: any) => void;\r\n}\r\n\r\nconst PhotoWidgetDropzone = ({ setFiles }: Props) => {\r\n\tconst styles = {\r\n\t\tborder: \"dashed 3px #eee\",\r\n\t\tborderColor: \"#eee\",\r\n\t\tborderRadius: \"5px\",\r\n\t\tpaddingTop: \"30px\",\r\n\t\ttextAlign: \"center\" as 'center',\r\n\t\theight: 200,\r\n\t};\r\n\tconst activeStyle = {\r\n\t\tborderColor: \"green\",\r\n\t};\r\n\tconst onDrop = useCallback(\r\n\t\t(acceptedFiles) => {\r\n\t\t\tsetFiles(\r\n\t\t\t\tacceptedFiles.map((file: any) =>\r\n\t\t\t\t\tObject.assign(file, { preview: URL.createObjectURL(file) }),\r\n\t\t\t\t),\r\n\t\t\t);\r\n\t\t},\r\n\t\t[setFiles],\r\n\t);\r\n\tconst { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\t{...getRootProps()}\r\n\t\t\tstyle={isDragActive ? { ...styles, ...activeStyle } : styles}\r\n\t\t>\r\n\t\t\t<input {...getInputProps()} />\r\n            <Icon name=\"upload\" size=\"huge\" />\r\n            <Header content='Drop image here'/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PhotoWidgetDropzone;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Grid, Header } from \"semantic-ui-react\";\r\nimport PhotoWidgetCropper from \"./PhotoWidgetCropper\";\r\nimport PhotoWidgetDropzone from \"./PhotoWidgetDropzone\";\r\n\r\ninterface Props {\r\n\tloading: boolean;\r\n\tuploadPhoto: (File: Blob) => void;\r\n}\r\n\r\nconst PhotoUploadWidget = ({ loading, uploadPhoto }: Props) => {\r\n\tconst [files, setFiles] = useState<any>([]);\r\n\tconst [cropper, setCropper] = useState<Cropper>();\r\n\r\n\tconst onCrop = () => {\r\n\t\tif (cropper) {\r\n\t\t\tcropper.getCroppedCanvas().toBlob((blob) => uploadPhoto(blob!));\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tfiles.forEach((file: any) => URL.revokeObjectURL(file.preview));\r\n\t\t};\r\n\t}, [files]);\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Grid.Column width={4}>\r\n\t\t\t\t<Header sub color=\"teal\" content=\"Step 1-Add Photo\" />\r\n\t\t\t\t<PhotoWidgetDropzone setFiles={setFiles} />\r\n\t\t\t</Grid.Column>\r\n\t\t\t<Grid.Column width={1} />\r\n\t\t\t<Grid.Column width={4}>\r\n\t\t\t\t<Header sub color=\"teal\" content=\"Step 2-Resize Image\" />\r\n\t\t\t\t{files && files.length > 0 && (\r\n\t\t\t\t\t<PhotoWidgetCropper\r\n\t\t\t\t\t\tsetCropper={setCropper}\r\n\t\t\t\t\t\timagePreview={files[0].preview}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Grid.Column>\r\n\t\t\t<Grid.Column width={1} />\r\n\t\t\t<Grid.Column width={4}>\r\n\t\t\t\t<Header sub color=\"teal\" content=\"Step 3-Preview & Upload\" />\r\n\t\t\t\t{files && files.length > 0 && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"img-preview\"\r\n\t\t\t\t\t\t\tstyle={{ minHeight: 200, overflow: \"hidden\" }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Button.Group widths={2}>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tonClick={onCrop}\r\n\t\t\t\t\t\t\t\tpositive\r\n\t\t\t\t\t\t\t\ticon=\"check\"\r\n\t\t\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tonClick={() => setFiles([])}\r\n\t\t\t\t\t\t\t\tpositive\r\n\t\t\t\t\t\t\t\ticon=\"close\"\r\n\t\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Button.Group>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nexport default PhotoUploadWidget;\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React, { SyntheticEvent, useState } from \"react\";\r\nimport { Button, Card, Grid, Header, Image, Tab } from \"semantic-ui-react\";\r\nimport PhotoUploadWidget from \"../../app/common/imageUpload/PhotoUploadWidget\";\r\nimport { Photo, Profile } from \"../../app/models/profile\";\r\nimport { useStore } from \"../../app/stores/store\";\r\n\r\ninterface Props {\r\n\tprofile: Profile;\r\n}\r\n\r\nconst ProfilePhotos = ({ profile }: Props) => {\r\n\tconst {\r\n\t\tprofileStore: {\r\n\t\t\tisCurrentUser,\r\n\t\t\tuploadPhoto,\r\n\t\t\tuploading,\r\n\t\t\tloading,\r\n\t\t\tsetMainPhoto,\r\n\t\t\tdeletePhoto,\r\n\t\t},\r\n\t} = useStore();\r\n\tconst [addPhotoMode, setPhotoMode] = useState(false);\r\n\tconst [target, setTarget] = useState(\"\");\r\n\r\n\tconst hadnlePhotoUpload = (file: Blob) => {\r\n\t\tuploadPhoto(file).then(() => setPhotoMode(false));\r\n\t};\r\n\tconst handleMainPhoto = (\r\n\t\tphoto: Photo,\r\n\t\te: SyntheticEvent<HTMLButtonElement>,\r\n\t) => {\r\n\t\tsetTarget(e.currentTarget.name);\r\n\t\tsetMainPhoto(photo);\r\n\t};\r\n\tconst handleDeletePhoto = (\r\n\t\tphoto: Photo,\r\n\t\te: SyntheticEvent<HTMLButtonElement>,\r\n\t) => {\r\n\t\tsetTarget(e.currentTarget.name);\r\n\t\tdeletePhoto(photo);\r\n\t};\r\n\treturn (\r\n\t\t<Tab.Pane>\r\n\t\t\t<Grid>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t<Header icon=\"image\" content=\"Photos\" floated=\"left\" />\r\n\t\t\t\t\t{isCurrentUser && (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tfloated=\"right\"\r\n\t\t\t\t\t\t\tbasic\r\n\t\t\t\t\t\t\tcontent={addPhotoMode ? \"Cancel\" : \"Add Photo\"}\r\n\t\t\t\t\t\t\tonClick={() => setPhotoMode(!addPhotoMode)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t{addPhotoMode ? (\r\n\t\t\t\t\t\t<PhotoUploadWidget\r\n\t\t\t\t\t\t\tuploadPhoto={hadnlePhotoUpload}\r\n\t\t\t\t\t\t\tloading={uploading}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Card.Group itemsPerRow={5}>\r\n\t\t\t\t\t\t\t{profile.photos?.map((photo) => (\r\n\t\t\t\t\t\t\t\t<Card key={photo.id}>\r\n\t\t\t\t\t\t\t\t\t<Image src={photo.url} />\r\n\t\t\t\t\t\t\t\t\t{isCurrentUser && (\r\n\t\t\t\t\t\t\t\t\t\t<Button.Group fluid widths={2}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tbasic\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"green\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontent=\"Main\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={\"main\" + photo.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={photo.isMain}\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading={target === \"main\" + photo.id && loading}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => handleMainPhoto(photo, e)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tbasic\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"trash\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading={target === photo.id && loading}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => handleDeletePhoto(photo, e)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={photo.isMain}\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={photo.id}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</Button.Group>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Card.Group>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t</Grid>\r\n\t\t</Tab.Pane>\r\n\t);\r\n};\r\n\r\nexport default observer(ProfilePhotos);\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Card, Grid, Header, Tab } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport ProfileCard from \"./ProfileCard\";\r\n\r\nconst ProfileFollowings = () => {\r\n\tconst { profileStore } = useStore();\r\n\tconst { profile, followings, loadingFollowings, activeTab } = profileStore;\r\n\r\n\treturn (\r\n\t\t<Tab.Pane loading={loadingFollowings}>\r\n\t\t\t<Grid>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\tfloated=\"left\"\r\n\t\t\t\t\t\ticon=\"user\"\r\n\t\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t\tactiveTab === 3\r\n\t\t\t\t\t\t\t\t? `People following ${profile?.displayName}`\r\n\t\t\t\t\t\t\t\t: `People ${profile?.displayName} is following`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t<Card.Group itemsPerRow={4}>\r\n\t\t\t\t\t\t{followings.map((profile) => (\r\n\t\t\t\t\t\t\t<ProfileCard key={profile.userName} profile={profile} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Card.Group>\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t</Grid>\r\n\t\t</Tab.Pane>\r\n\t);\r\n};\r\n\r\nexport default observer(ProfileFollowings);\r\n","import React, { SyntheticEvent, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Tab, Grid, Header, Card, Image, TabProps } from \"semantic-ui-react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { UserActivity } from \"../../app/models/profile\";\r\nimport { format } from \"date-fns\";\r\nimport { useStore } from \"../../app/stores/store\";\r\n\r\nconst panes = [\r\n\t{ menuItem: \"Future Events\", pane: { key: \"future\" } },\r\n\t{ menuItem: \"Past Events\", pane: { key: \"past\" } },\r\n\t{ menuItem: \"Hosting\", pane: { key: \"hosting\" } },\r\n];\r\n\r\nconst ProfileActivities = () => {\r\n\tconst { profileStore } = useStore();\r\n\tconst { loadUserActivities, profile, loadingActivities, userActivities } =\r\n\t\tprofileStore;\r\n\r\n\tuseEffect(() => {\r\n\t\tloadUserActivities(profile!.userName);\r\n\t}, [loadUserActivities, profile]);\r\n\r\n\tconst handleTabChange = (e: SyntheticEvent, data: TabProps) => {\r\n\t\tloadUserActivities(\r\n\t\t\tprofile!.userName,\r\n\t\t\tpanes[data.activeIndex as number].pane.key,\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Tab.Pane loading={loadingActivities}>\r\n\t\t\t<Grid>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t<Header floated=\"left\" icon=\"calendar\" content={\"Activities\"} />\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t<Tab\r\n\t\t\t\t\t\tpanes={panes}\r\n\t\t\t\t\t\tmenu={{ secondary: true, pointing: true }}\r\n\t\t\t\t\t\tonTabChange={(e, data) => handleTabChange(e, data)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Card.Group itemsPerRow={4}>\r\n\t\t\t\t\t\t{userActivities.map((activity: UserActivity) => (\r\n\t\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\t\tas={Link}\r\n\t\t\t\t\t\t\t\tto={`/activities/${activity.id}`}\r\n\t\t\t\t\t\t\t\tkey={activity.id}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\t\tsrc={`/assets/categoryImages/${activity.category}.jpg`}\r\n\t\t\t\t\t\t\t\t\tstyle={{ minHeight: 100, objectFit: \"cover\" }}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Card.Content>\r\n\t\t\t\t\t\t\t\t\t<Card.Header textAlign=\"center\">{activity.title}</Card.Header>\r\n\t\t\t\t\t\t\t\t\t<Card.Meta textAlign=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t<div>{format(new Date(activity.date), \"do LLL\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>{format(new Date(activity.date), \"h:mm a\")}</div>\r\n\t\t\t\t\t\t\t\t\t</Card.Meta>\r\n\t\t\t\t\t\t\t\t</Card.Content>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Card.Group>\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t</Grid>\r\n\t\t</Tab.Pane>\r\n\t);\r\n};\r\n\r\nexport default observer(ProfileActivities);\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Tab } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../app/models/profile\";\r\nimport ProfileAbout from \"./ProfileAbout\";\r\nimport ProfilePhotos from \"./ProfilePhotos\";\r\nimport ProfileFollowings from \"./ProfileFollowings\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport ProfileActivities from \"./ProfileActivities\";\r\ninterface Props {\r\n\tprofile: Profile;\r\n}\r\n\r\nconst ProfileContent = ({ profile }: Props) => {\r\n\tconst { profileStore } = useStore();\r\n\r\n\tconst panes = [\r\n\t\t{ menuItem: \"About\", render: () => <ProfileAbout /> },\r\n\t\t{ menuItem: \"Photos\", render: () => <ProfilePhotos profile={profile} /> },\r\n\t\t{ menuItem: \"Events\", render: () => <ProfileActivities /> },\r\n\t\t{ menuItem: \"Followers\", render: () => <ProfileFollowings /> },\r\n\t\t{ menuItem: \"Following\", render: () => <ProfileFollowings /> },\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Tab\r\n\t\t\tmenu={{ fluid: true, vertical: true }}\r\n\t\t\tmenuPosition=\"right\"\r\n\t\t\tpanes={panes}\r\n\t\t\tonTabChange={(e, data) => profileStore.setActiveTab(data.activeIndex)}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default observer(ProfileContent);\r\n","import { observer } from \"mobx-react-lite\";\r\nimport {\r\n\tDivider,\r\n\tGrid,\r\n\tHeader,\r\n\tItem,\r\n\tSegment,\r\n\tStatistic,\r\n} from \"semantic-ui-react\";\r\nimport { Profile } from \"../../app/models/profile\";\r\nimport FollowButton from \"./FollowButton\";\r\n\r\ninterface Props {\r\n\tprofile: Profile;\r\n}\r\n\r\nconst ProfileHeader = ({ profile }: Props) => {\r\n\treturn (\r\n\t\t<Segment>\r\n\t\t\t<Grid>\r\n\t\t\t\t<Grid.Column width={12}>\r\n\t\t\t\t\t<Item.Group>\r\n\t\t\t\t\t\t<Item>\r\n\t\t\t\t\t\t\t<Item.Image\r\n\t\t\t\t\t\t\t\tavatar\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tsrc={profile.image || \"/assets/user.png\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Item.Content verticalAlign=\"middle\">\r\n\t\t\t\t\t\t\t\t<Header as=\"h1\" content={profile.displayName} />\r\n\t\t\t\t\t\t\t</Item.Content>\r\n\t\t\t\t\t\t</Item>\r\n\t\t\t\t\t</Item.Group>\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t\t<Grid.Column width={4}>\r\n\t\t\t\t\t<Statistic.Group widths={2}>\r\n\t\t\t\t\t\t<Statistic label=\"Followers\" value={profile.followersCount} />\r\n\t\t\t\t\t\t<Statistic label=\"Following\" value={profile.followingCount} />\r\n\t\t\t\t\t</Statistic.Group>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<FollowButton profile={profile} />\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t</Grid>\r\n\t\t</Segment>\r\n\t);\r\n};\r\n\r\nexport default observer(ProfileHeader);\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Grid } from \"semantic-ui-react\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport ProfileContent from \"./ProfileContent\";\r\nimport ProfileHeader from \"./ProfileHeader\";\r\n\r\nconst ProfilePage = () => {\r\n\tconst { username } = useParams<{ username: string }>();\r\n\tconst { profileStore } = useStore();\r\n\tconst { loadingProfile, loadProfile, profile, setActiveTab } = profileStore;\r\n\r\n\tuseEffect(() => {\r\n\t\tloadProfile(username);\r\n\t\treturn () => {\r\n\t\t\tsetActiveTab(0);\r\n\t\t};\r\n\t}, [loadProfile, username, setActiveTab]);\r\n\r\n\tif (loadingProfile) return <LoadingComponent content=\"Loading Profile...\" />;\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Grid.Column width={12}>\r\n\t\t\t\t{profile && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ProfileHeader profile={profile} />\r\n\t\t\t\t\t\t<ProfileContent profile={profile} />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nexport default observer(ProfilePage);\r\n","import React from \"react\";\r\nimport { Redirect, Route, RouteComponentProps, RouteProps } from \"react-router-dom\";\r\nimport { useStore } from \"../stores/store\";\r\n\r\ninterface Props extends RouteProps {\r\n\tcomponent:\r\n\t\t| React.ComponentType<RouteComponentProps<any>>\r\n\t\t| React.ComponentType<any>;\r\n}\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }: Props) => {\r\n\tconst {\r\n\t\tuserStore: { isLoggedIn },\r\n\t} = useStore();\r\n\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={(props) =>\r\n\t\t\t\tisLoggedIn ? <Component {...props} /> : <Redirect to=\"/\" />\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import { useLocation } from \"react-router-dom\";\r\n\r\nconst useQuery=() => {\r\nreturn new URLSearchParams(useLocation().search)\r\n}\r\n\r\nexport default useQuery;","import React from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Button, Header, Icon, Segment } from \"semantic-ui-react\";\r\nimport agent from \"../../app/api/agent\";\r\nimport useQuery from \"../../app/common/util/hooks,\";\r\n\r\nconst RegisterSuccess = () => {\r\n\tconst email = useQuery().get(\"email\") as string;\r\n\r\n\tconst handleEmailRsend = () => {\r\n\t\tagent.Account.resendEmailConfirm(email)\r\n\t\t\t.then(() => {\r\n\t\t\t\ttoast.success(\"Verification email resent - please check your email\");\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err));\r\n\t};\r\n\treturn (\r\n\t\t<Segment placeholder textAlign=\"center\">\r\n\t\t\t<Header icon color=\"green\">\r\n\t\t\t\t<Icon name=\"check\" />\r\n\t\t\t\tSuccessfully registered!\r\n\t\t\t</Header>\r\n\t\t\t<p>Please check your email for Verification email</p>\r\n\t\t\t{email && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<p>Didn't receive the email? Click the button below to resend</p>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\tonClick={handleEmailRsend}\r\n\t\t\t\t\t\tcontent=\"Resend email\"\r\n\t\t\t\t\t\tsize=\"huge\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</Segment>\r\n\t);\r\n};\r\n\r\nexport default RegisterSuccess;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Button, Header, Icon, Segment } from \"semantic-ui-react\";\r\nimport agent from \"../../app/api/agent\";\r\nimport useQuery from \"../../app/common/util/hooks,\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport LoginForm from \"./LoginForm\";\r\n\r\nconst ConfirmEmail = () => {\r\n\tconst { modalStore } = useStore();\r\n\tconst email = useQuery().get(\"email\") as string;\r\n\tconst token = useQuery().get(\"token\") as string;\r\n\r\n\tconst Status = {\r\n\t\tVerifying: \"Verifying\",\r\n\t\tFailed: \"Failed\",\r\n\t\tSuccess: \"Success\",\r\n\t};\r\n\tconst [status, setStatus] = useState(Status.Verifying);\r\n\tconst handleEmailRsend = () => {\r\n\t\tagent.Account.resendEmailConfirm(email)\r\n\t\t\t.then(() => {\r\n\t\t\t\ttoast.success(\"Verification email resent - please check your email\");\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err));\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tagent.Account.verifyEmail(token, email)\r\n\t\t\t.then(() => {\r\n\t\t\t\tsetStatus(Status.Success);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tsetStatus(Status.Failed);\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}, [Status.Failed, Status.Success, token, email]);\r\n\r\n\tconst getBody = () => {\r\n\t\tswitch (status) {\r\n\t\t\tcase Status.Verifying:\r\n\t\t\t\treturn <p>Verifying</p>;\r\n\r\n\t\t\tcase Status.Failed:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tVerification failed.You can try resending the verify link to your\r\n\t\t\t\t\t\t\temail\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\t\tonClick={handleEmailRsend}\r\n\t\t\t\t\t\t\tsize=\"huge\"\r\n\t\t\t\t\t\t\tcontent=\"Resend email\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\tcase Status.Success:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<p>Email has been Verified - you can now login</p>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\t\tonClick={() => modalStore.openModal(<LoginForm />)}\r\n\t\t\t\t\t\t\tsize=\"huge\"\r\n\t\t\t\t\t\t\tcontent=\"Login\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Segment placeholder textAlign=\"center\">\r\n\t\t\t<Header icon>\r\n\t\t\t\t<Icon name=\"envelope\" />\r\n\t\t\t\tEmail verification\r\n\t\t\t</Header>\r\n\t\t\t<Segment.Inline>{getBody()}</Segment.Inline>\r\n\t\t</Segment>\r\n\t);\r\n};\r\n\r\nexport default ConfirmEmail;\r\n","import React, { useEffect } from \"react\";\nimport { Container } from \"semantic-ui-react\";\nimport NavBar from \"./NavBar\";\nimport ActivityDashboard from \"../../features/activities/dashboard/ActivityDashboard\";\nimport { observer } from \"mobx-react-lite\";\nimport { Route, Switch, useLocation } from \"react-router-dom\";\nimport HomePage from \"../../features/home/HomePage\";\nimport ActivityForm from \"../../features/activities/form/ActivityForm\";\nimport ActivityDetails from \"../../features/activities/details/ActivityDetails\";\nimport TestErrors from \"../../features/errors/TestError\";\nimport { ToastContainer } from \"react-toastify\";\nimport NotFound from \"../../features/errors/NotFound\";\nimport ServerError from \"../../features/errors/ServerError\";\nimport { useStore } from \"../stores/store\";\nimport LoadingComponent from \"./LoadingComponent\";\nimport ModalContainer from \"../common/modals/ModalContainer\";\nimport ProfilePage from \"../../features/profiles/ProfilePage\";\nimport PrivateRoute from \"./PrivateRoute\";\nimport RegisterSuccess from \"../../features/users/RegisterSuccess\";\nimport ConfirmEmail from \"../../features/users/ConfirmEmail\";\n\nconst App = () => {\n\tconst location = useLocation();\n\tconst { commonStore, userStore } = useStore();\n\n\tuseEffect(() => {\n\t\tif (commonStore.token) {\n\t\t\tuserStore.getUser().finally(() => commonStore.setUploaded());\n\t\t} else {\n\t\t\tuserStore.getFacebookLoginStatus().then(() => commonStore.setUploaded());\n\t\t}\n\t}, [commonStore, userStore]);\n\n\tif (!commonStore.uploaded)\n\t\treturn <LoadingComponent content=\"Setting things up\" />;\n\n\treturn (\n\t\t<>\n\t\t\t<ToastContainer position=\"bottom-right\" hideProgressBar />\n\t\t\t<ModalContainer />\n\t\t\t<Route exact path=\"/\" component={HomePage} />\n\t\t\t<Route\n\t\t\t\tpath={\"/(.+)\"}\n\t\t\t\trender={() => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<NavBar />\n\t\t\t\t\t\t<Container style={{ marginTop: \"7em\" }}>\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t<PrivateRoute\n\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\tpath=\"/activities\"\n\t\t\t\t\t\t\t\t\tcomponent={ActivityDashboard}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<PrivateRoute\n\t\t\t\t\t\t\t\t\tpath=\"/activities/:id\"\n\t\t\t\t\t\t\t\t\tcomponent={ActivityDetails}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<PrivateRoute\n\t\t\t\t\t\t\t\t\tkey={location.key}\n\t\t\t\t\t\t\t\t\tpath={[\"/createActivity\", \"/manage/:id\"]}\n\t\t\t\t\t\t\t\t\tcomponent={ActivityForm}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<PrivateRoute\n\t\t\t\t\t\t\t\t\tpath=\"/profiles/:username\"\n\t\t\t\t\t\t\t\t\tcomponent={ProfilePage}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<PrivateRoute path=\"/errors\" component={TestErrors} />\n\t\t\t\t\t\t\t\t<Route path=\"/server-error\" component={ServerError} />\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\tpath=\"/account/registerSuccess\"\n\t\t\t\t\t\t\t\t\tcomponent={RegisterSuccess}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\tpath=\"/account/verifyEmail\"\n\t\t\t\t\t\t\t\t\tcomponent={ConfirmEmail}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Route component={NotFound} />\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default observer(App);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst ScrollToTop = () => {\r\n\tconst { pathname } = useLocation();\r\n\tuseEffect(() => {\r\n\t\twindow.scrollTo(0, 0);\r\n\t}, [pathname]);\r\n\treturn null;\r\n};\r\n\r\nexport default ScrollToTop;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport \"react-calendar/dist/Calendar.css\";\nimport \"react-toastify/dist/ReactToastify.min.css\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"./app/layout/styles.css\";\nimport App from \"./app/layout/App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { store, StoreContext } from \"./app/stores/store\";\nimport { Router } from \"react-router-dom\";\nimport { createBrowserHistory } from \"history\";\nimport ScrollToTop from \"./app/layout/ScrollToTop\";\n\nexport const history = createBrowserHistory();\n\nReactDOM.render(\n\t<StoreContext.Provider value={store}>\n\t\t<Router history={history}>\n\t\t\t<ScrollToTop/>\n\t\t\t<App />\n\t\t</Router>\n\t</StoreContext.Provider>,\n\tdocument.getElementById(\"root\"),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}